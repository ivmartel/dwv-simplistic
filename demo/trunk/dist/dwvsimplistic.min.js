import*as e from"dwv";var t={314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var l=0;l<this.length;l++){var d=this[l][0];null!=d&&(i[d]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);o&&i[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),t.push(c))}},t}},354:e=>{e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),a="/*# ".concat(r," */");return[t].concat([a]).join("\n")}return[t].join("\n")}},822:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(354),r=n.n(o),a=n(314),i=n.n(a)()(r());i.push([e.id,"/* progress bar */\nprogress {\n  appearance: none;\n  -webkit-appearance: none;\n  width: 100%;\n  height: 5px;\n  border: 0;\n  z-index: 100;\n}\n\n/* dwv */\n.dwv {\n  display: flex;\n  flex-direction: column;\n}\n.layerGroup {\n  position: relative;\n  padding: 0;\n  display: flex;\n  justify-content: center;\n  /* occupy space left by toolbar and legend */\n  flex: 1;\n}\n.layer {\n  position: absolute;\n  pointer-events: none;\n}\n\n/* drag&drop */\n.dropBox {\n  text-align: center;\n  width: 50%; height: 75%;\n}\n.dropBoxBorder {\n  margin: 20px auto;\n  border: 5px dashed #ccc;\n}\n.dropBoxBorder:hover {\n  margin: 20px auto;\n  border: 5px dashed #cc0;\n}\n#input-file-link {\n  text-decoration-line: underline;\n}\n\n/* legend */\n.legend {\n  text-align: center;\n  font-size: 8pt;\n  margin: 1em;\n}\n\n/* toolbar */\n.toolbar {\n  font: 14px arial, sans-serif;\n  margin-bottom: 5px;\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n.toolbar button, .toolbar select {\n  margin: 10px 3px;\n  padding: 10px 10px;\n  border-radius: 4px;\n  font-size: 16px;\n  font-weight: 600;\n  height: 40px;\n  border: 1px solid #e0e0e0;\n  background-color: #fff;\n  color: #757575;\n}\n.toolbar button:enabled:hover, .toolbar select:enabled:hover {\n  background-color: #f5f5f5;\n  cursor: pointer;\n}\n.toolbar button:disabled, .toolbar select:disabled {\n  color: #bdbdbd;\n  cursor: default;\n}\n.toolbar .active {\n  background-color: #f0f1f9 !important;\n}\n.toolbar button:enabled path {\n  fill: #757575;\n}\n.toolbar button.active:enabled path {\n  fill: #4a5bb9;\n}\n.toolbar button:disabled path {\n  fill: #bdbdbd;\n}\n\n/* modal dialog */\n.modal {\n  display: none; /* Hidden by default */\n  position: fixed; /* Stay in place */\n  z-index: 1; /* Sit on top */\n  left: 0;\n  top: 0;\n  width: 100%; /* Full width */\n  height: 100%; /* Full height */\n  background-color: rgb(0,0,0); /* Fallback color */\n  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n\n  .modal-content {\n    background-color: #fefefe;\n    margin: 5% auto; /* 5% from the top and centered */\n    padding: 20px;\n    width: 80%;\n    height: 80%;\n    overflow: auto;\n  }\n\n  input, label {\n    vertical-align: middle;\n    margin-right: 10px;\n  }\n\n  .modal-content-scroll {\n    margin-right: 20px;\n    height: 80%;\n    overflow: auto;\n\n    table {\n      width: 100%;\n      border-collapse: collapse;\n    }\n    tr {\n      border: solid thin;\n      border-color: #ddd;\n    }\n    th {\n      text-align: left;\n    }\n    td, th {\n      padding: 10px;\n    }\n  }\n}\n\n/* color-scheme */\n@media (prefers-color-scheme: dark) {\n  .legend a {\n    color: #ccc;\n  }\n  .toolbar button, .toolbar select {\n    border: 1px solid #2f2f2f;\n    background-color: #fff;\n  }\n  .toolbar button, .toolbar select {\n    color: #fff;\n    background-color: #333;\n  }\n  .toolbar button:enabled:hover, .toolbar select:enabled:hover {\n    background-color: #555;\n  }\n  .toolbar button:disabled, .toolbar select:disabled {\n    color: #aeaeae;\n  }\n  .toolbar .active {\n    background-color: #404040 !important;\n  }\n  .toolbar button:enabled path {\n    fill: #fff;\n  }\n  .toolbar button:disabled path {\n    fill: #aeaeae;\n  }\n  .modal {\n    .modal-content {\n      background-color: #424242;\n    }\n    .modal-content-scroll {\n      tr {\n        border: solid thin;\n        border-color: #666;\n      }\n    }\n  }\n}","",{version:3,sources:["webpack://./src/dwv-component.css"],names:[],mappings:"AAAA,iBAAiB;AACjB;EACE,gBAAgB;EAChB,wBAAwB;EACxB,WAAW;EACX,WAAW;EACX,SAAS;EACT,YAAY;AACd;;AAEA,QAAQ;AACR;EACE,aAAa;EACb,sBAAsB;AACxB;AACA;EACE,kBAAkB;EAClB,UAAU;EACV,aAAa;EACb,uBAAuB;EACvB,4CAA4C;EAC5C,OAAO;AACT;AACA;EACE,kBAAkB;EAClB,oBAAoB;AACtB;;AAEA,cAAc;AACd;EACE,kBAAkB;EAClB,UAAU,EAAE,WAAW;AACzB;AACA;EACE,iBAAiB;EACjB,uBAAuB;AACzB;AACA;EACE,iBAAiB;EACjB,uBAAuB;AACzB;AACA;EACE,+BAA+B;AACjC;;AAEA,WAAW;AACX;EACE,kBAAkB;EAClB,cAAc;EACd,WAAW;AACb;;AAEA,YAAY;AACZ;EACE,4BAA4B;EAC5B,kBAAkB;EAClB,aAAa;EACb,uBAAuB;EACvB,eAAe;AACjB;AACA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,kBAAkB;EAClB,eAAe;EACf,gBAAgB;EAChB,YAAY;EACZ,yBAAyB;EACzB,sBAAsB;EACtB,cAAc;AAChB;AACA;EACE,yBAAyB;EACzB,eAAe;AACjB;AACA;EACE,cAAc;EACd,eAAe;AACjB;AACA;EACE,oCAAoC;AACtC;AACA;EACE,aAAa;AACf;AACA;EACE,aAAa;AACf;AACA;EACE,aAAa;AACf;;AAEA,iBAAiB;AACjB;EACE,aAAa,EAAE,sBAAsB;EACrC,eAAe,EAAE,kBAAkB;EACnC,UAAU,EAAE,eAAe;EAC3B,OAAO;EACP,MAAM;EACN,WAAW,EAAE,eAAe;EAC5B,YAAY,EAAE,gBAAgB;EAC9B,4BAA4B,EAAE,mBAAmB;EACjD,iCAAiC,EAAE,qBAAqB;;EAExD;IACE,yBAAyB;IACzB,eAAe,EAAE,iCAAiC;IAClD,aAAa;IACb,UAAU;IACV,WAAW;IACX,cAAc;EAChB;;EAEA;IACE,sBAAsB;IACtB,kBAAkB;EACpB;;EAEA;IACE,kBAAkB;IAClB,WAAW;IACX,cAAc;;IAEd;MACE,WAAW;MACX,yBAAyB;IAC3B;IACA;MACE,kBAAkB;MAClB,kBAAkB;IACpB;IACA;MACE,gBAAgB;IAClB;IACA;MACE,aAAa;IACf;EACF;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,WAAW;EACb;EACA;IACE,yBAAyB;IACzB,sBAAsB;EACxB;EACA;IACE,WAAW;IACX,sBAAsB;EACxB;EACA;IACE,sBAAsB;EACxB;EACA;IACE,cAAc;EAChB;EACA;IACE,oCAAoC;EACtC;EACA;IACE,UAAU;EACZ;EACA;IACE,aAAa;EACf;EACA;IACE;MACE,yBAAyB;IAC3B;IACA;MACE;QACE,kBAAkB;QAClB,kBAAkB;MACpB;IACF;EACF;AACF",sourcesContent:["/* progress bar */\nprogress {\n  appearance: none;\n  -webkit-appearance: none;\n  width: 100%;\n  height: 5px;\n  border: 0;\n  z-index: 100;\n}\n\n/* dwv */\n.dwv {\n  display: flex;\n  flex-direction: column;\n}\n.layerGroup {\n  position: relative;\n  padding: 0;\n  display: flex;\n  justify-content: center;\n  /* occupy space left by toolbar and legend */\n  flex: 1;\n}\n.layer {\n  position: absolute;\n  pointer-events: none;\n}\n\n/* drag&drop */\n.dropBox {\n  text-align: center;\n  width: 50%; height: 75%;\n}\n.dropBoxBorder {\n  margin: 20px auto;\n  border: 5px dashed #ccc;\n}\n.dropBoxBorder:hover {\n  margin: 20px auto;\n  border: 5px dashed #cc0;\n}\n#input-file-link {\n  text-decoration-line: underline;\n}\n\n/* legend */\n.legend {\n  text-align: center;\n  font-size: 8pt;\n  margin: 1em;\n}\n\n/* toolbar */\n.toolbar {\n  font: 14px arial, sans-serif;\n  margin-bottom: 5px;\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n.toolbar button, .toolbar select {\n  margin: 10px 3px;\n  padding: 10px 10px;\n  border-radius: 4px;\n  font-size: 16px;\n  font-weight: 600;\n  height: 40px;\n  border: 1px solid #e0e0e0;\n  background-color: #fff;\n  color: #757575;\n}\n.toolbar button:enabled:hover, .toolbar select:enabled:hover {\n  background-color: #f5f5f5;\n  cursor: pointer;\n}\n.toolbar button:disabled, .toolbar select:disabled {\n  color: #bdbdbd;\n  cursor: default;\n}\n.toolbar .active {\n  background-color: #f0f1f9 !important;\n}\n.toolbar button:enabled path {\n  fill: #757575;\n}\n.toolbar button.active:enabled path {\n  fill: #4a5bb9;\n}\n.toolbar button:disabled path {\n  fill: #bdbdbd;\n}\n\n/* modal dialog */\n.modal {\n  display: none; /* Hidden by default */\n  position: fixed; /* Stay in place */\n  z-index: 1; /* Sit on top */\n  left: 0;\n  top: 0;\n  width: 100%; /* Full width */\n  height: 100%; /* Full height */\n  background-color: rgb(0,0,0); /* Fallback color */\n  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n\n  .modal-content {\n    background-color: #fefefe;\n    margin: 5% auto; /* 5% from the top and centered */\n    padding: 20px;\n    width: 80%;\n    height: 80%;\n    overflow: auto;\n  }\n\n  input, label {\n    vertical-align: middle;\n    margin-right: 10px;\n  }\n\n  .modal-content-scroll {\n    margin-right: 20px;\n    height: 80%;\n    overflow: auto;\n\n    table {\n      width: 100%;\n      border-collapse: collapse;\n    }\n    tr {\n      border: solid thin;\n      border-color: #ddd;\n    }\n    th {\n      text-align: left;\n    }\n    td, th {\n      padding: 10px;\n    }\n  }\n}\n\n/* color-scheme */\n@media (prefers-color-scheme: dark) {\n  .legend a {\n    color: #ccc;\n  }\n  .toolbar button, .toolbar select {\n    border: 1px solid #2f2f2f;\n    background-color: #fff;\n  }\n  .toolbar button, .toolbar select {\n    color: #fff;\n    background-color: #333;\n  }\n  .toolbar button:enabled:hover, .toolbar select:enabled:hover {\n    background-color: #555;\n  }\n  .toolbar button:disabled, .toolbar select:disabled {\n    color: #aeaeae;\n  }\n  .toolbar .active {\n    background-color: #404040 !important;\n  }\n  .toolbar button:enabled path {\n    fill: #fff;\n  }\n  .toolbar button:disabled path {\n    fill: #aeaeae;\n  }\n  .modal {\n    .modal-content {\n      background-color: #424242;\n    }\n    .modal-content-scroll {\n      tr {\n        border: solid thin;\n        border-color: #666;\n      }\n    }\n  }\n}"],sourceRoot:""}]);const l=i}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={id:e,exports:{}};return t[e](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const r=(i={App:()=>e.App,WindowLevel:()=>e.WindowLevel,getDwvVersion:()=>e.getDwvVersion,getTagFromKey:()=>e.getTagFromKey},l={},o.d(l,i),l),a={Scroll:"M110-215v-118h740v118H110Zm0-206v-118h740v118H110Zm0-206v-118h740v118H110Z",ZoomAndPan:"M763-106 517-352q-29 18-64.292 28.5T376.035-313Q267-313 190-390t-77-186q0-109 77-186t186-77q109 0 186 77t77 186.035q0 42.381-10.5 76.673T600-437l247 248-84 83ZM376-431q61 0 103-42t42-103q0-61-42-103t-103-42q-61 0-103 42t-42 103q0 61 42 103t103 42Z",WindowLevel:"M480.192-62Q394-62 318-94.5q-76-32.5-133.5-90t-90-133.542Q62-394.083 62-480.542 62-567 94.5-642.5t90-133q57.5-57.5 133.542-90 76.041-32.5 162.5-32.5Q567-898 642.5-865.5t133 90q57.5 57.5 90 133.308 32.5 75.807 32.5 162Q898-394 865.5-318q-32.5 76-90 133.5t-133.308 90q-75.807 32.5-162 32.5ZM528-184q109-18 180.5-99.222T780-480q0-112.818-71.5-194.909T528-775v591Z",Draw:"M183-215q-49.7 0-83.85-34.15Q65-283.3 65-333v-294q0-49.7 34.15-83.85Q133.3-745 183-745h594q49.7 0 83.85 34.15Q895-676.7 895-627v294q0 49.7-34.15 83.85Q826.7-215 777-215H183Zm0-118h594v-294H672v147h-72v-147h-84v147h-72v-147h-84v147h-72v-147H183v294Zm105-147h72-72Zm156 0h72-72Zm156 0h72-72Zm-120 0Z",Reset:"M476-158q-133 0-227.5-94.5T154-480q0-133 94.5-227.5T476-802q74 0 136 30t106 82v-112h88v289H516v-87h125q-29-38-71.5-61T476-684q-85 0-144.5 59.5T272-480q0 85 59.5 144.5T476-276q78 0 134.5-52.5T677-456h121q-10 126-102 212t-220 86Z",ToggleOrientation:"M327-273q-35.888 0-61.444-25.556Q240-324.112 240-360v-209q0-36.3 25.15-62.15T327-657h33l48-48h144l48 48h33q36.7 0 61.85 25.85T720-569v209q0 35.888-25.556 61.444Q668.888-273 633-273H327Zm0-87h306v-209H327v209Zm153.425-40Q507-400 525.5-419.133q18.5-19.132 18.5-46Q544-492 525.075-510.5q-18.925-18.5-45.5-18.5T434.5-510.075q-18.5 18.925-18.5 45.5T434.925-419q18.925 19 45.5 19ZM336-937q35.783-11.9 73.033-17.45Q446.283-960 485-960q91 0 173.5 33.5T805-835.275q64 57.725 104.544 136.5Q950.089-620 960-528H857q-8-61-34.5-115.5t-67-97q-40.5-42.5-94-71T547-851l46 47-60 62-197-195ZM624-23q-35.783 11.9-73.033 17.45Q513.717 0 475 0q-91.92 0-174.46-33.5t-146.04-91Q91-182 49.956-261 8.91-340 0-432h103q7 61 33.5 115.5t67.5 97q41 42.5 94.5 71T413-109l-46-47 60-62L624-23ZM482-466Z",Fullscreen:"M110-110v-334h118v132l420-420H516v-118h334v334H732v-132L312-228h132v118H110Z",Tags:"M406-405h177v-92H406v92Zm0-132h354v-92H406v92Zm0-132h354v-92H406v92Zm-51 440q-53 0-89.5-36.5T229-355v-456q0-53 36.5-89.5T355-937h456q53 0 89.5 36.5T937-811v456q0 53-36.5 89.5T811-229H355Zm0-126h456v-456H355v456ZM149-23q-53 0-89.5-36.5T23-149v-582h126v582h582v126H149Zm206-788v456-456Z"};var i,l;function d(e,t){const n="http://www.w3.org/2000/svg",o=document.createElementNS(n,"path");o.setAttributeNS(null,"d",a[e]);const r=document.createElementNS(n,"svg");r.setAttributeNS(null,"height",20),r.setAttributeNS(null,"width",20),r.setAttributeNS(null,"viewBox","0 -960 960 960"),r.appendChild(o);const i=document.createElement("button");return i.id=t.getToolId(e),i.title=e,i.appendChild(r),"Reset"===e?i.addEventListener("click",(function(){t.onDisplayReset()})):"ToggleOrientation"===e?i.addEventListener("click",(function(){t.toggleOrientation()})):"Fullscreen"===e?i.addEventListener("click",(function(){t.toggleFullScreen()})):"Tags"===e?i.addEventListener("click",(function(){t.openTagsModal()})):i.addEventListener("click",(function(){t.onChangeTool(e)})),i}function s(e,t){const n=document.createElement("option");n.value="",n.appendChild(document.createTextNode("Preset..."));const o=document.createElement("select");return o.id=t.getToolId(e),o.title="Window level presets",o.appendChild(n),o.addEventListener("change",(function(){t.onChangePreset(this.value)})),o}class c{#e;#t;#n;#o;#r;#a=document;constructor(e,t,n,o){this.#n=e,this.#o=t,this.#r=n,void 0!==o&&(this.#a=o)}init(){const e=this.#a.getElementById(this.getToolbarDivId());for(let t=0;t<this.#o.length;++t)"WindowLevelPresets"===this.#o[t]?e.appendChild(s(this.#o[t],this)):e.appendChild(d(this.#o[t],this))}showProgressBar(){const e=document.createElement("progress");e.id="progress-"+this.#r,e.max="100",e.value="0",this.#a.getElementById(this.getToolbarDivId()).appendChild(e)}setProgress(e){const t=this.#a.getElementById("progress-"+this.#r);t&&(100===e?t.remove():t.value=e)}getDwvDivId(){return"dwv-"+this.#r}getLayerGroupDivId(){return"layerGroup-"+this.#r}getToolbarDivId(){return"toolbar-"+this.#r}getToolId(e){return e.toLowerCase()+"-"+this.#r}enableTool(e,t){const n=this.getToolId(e);this.#a.getElementById(n).disabled=!t}enableTools(e){for(let t=0;t<this.#o.length;++t)this.enableTool(this.#o[t],e)}activateTool(e,t){const n=this.getToolId(e);t?this.#a.getElementById(n).classList.add("active"):this.#a.getElementById(n).classList.remove("active")}activateTools(e){for(let t=0;t<this.#o.length;++t)this.activateTool(this.#o[t],e)}onChangePreset(e){this.#n.setWindowLevelPreset(e),this.setSelectedPreset(e)}onChangeTool(e){this.activateTools(!1),this.activateTool(e,!0),this.#n.setTool(e),"Draw"===e&&this.#n.setToolFeatures({shapeName:"Ruler"})}onDisplayReset(){this.#n.resetDisplay();const e=this.getToolId("WindowLevelPresets");this.#a.getElementById(e).selectedIndex=0}toggleOrientation(){void 0!==this.#e?"axial"===this.#e?this.#e="coronal":"coronal"===this.#e?this.#e="sagittal":"sagittal"===this.#e&&(this.#e="axial"):this.#e="coronal";const e={"*":[{divId:this.getLayerGroupDivId(),orientation:this.#e}]};this.#n.setDataViewConfigs(e);const t=this.#n.getDataIds();for(let e=0;e<t.length;++e)this.#n.render(t[e])}toggleFullScreen(){const e=this.getLayerGroupDivId(),t=this.#a.getElementById(e);if(document.fullscreenElement)document.exitFullscreen&&(document.exitFullscreen(),t.style.height=this.#t);else{const e=this.getDwvDivId();this.#a.getElementById(e).requestFullscreen().then((()=>{this.#t=t.style.height,t.style.height="100%"}))}}openTagsModal(){const e="modal-"+this.#r;let t=this.#a.getElementById(e);t||(t=this.#i(e),this.#a.getElementById(this.getDwvDivId()).appendChild(t)),t.style.display="block"}#i(e){const t=document.createElement("div");t.className="modal",t.id=e,t.style.display="block",this.#a.addEventListener("click",(function(e){e.target===t&&(t.style.display="none")}));const n=document.createElement("div");n.className="modal-content",n.id="modal-content-"+this.#r,t.appendChild(n);const o=document.createElement("h2");o.appendChild(document.createTextNode("DICOM Tags")),n.appendChild(o);const r=document.createElement("div");r.className="modal-content-scroll";const a=this.#n.getMetaData("0"),i=a["00200013"];let l;if(void 0!==i){let e=i.value;"string"==typeof e&&(e=[e]),l=e.map(Number),l.sort((function(e,t){return e-t}))}let d=l[0];const s=document.createElement("input");s.type="range",s.id="instancenumber-slider-"+this.#r,s.min=0,s.max=l.length-1,s.value=0,s.title="Instance Number";const c=document.createElement("label");c.id="instancenumber-slider-label-"+this.#r,c.for=s.id,c.appendChild(document.createTextNode(d)),c.title=s.title;const p=document.createElement("p");p.appendChild(s),p.appendChild(c),n.appendChild(p),s.addEventListener("input",(function(e){d=l[e.target.value];const t=A(h(a,d));r.replaceChildren(t),c.replaceChildren(document.createTextNode(d))}));const u=A(h(a,d));return r.appendChild(u),n.appendChild(r),t}updatePresets(e){const t=this.getToolId("WindowLevelPresets"),n=this.#a.getElementById(t);for(;n.hasChildNodes();)n.removeChild(n.firstChild);for(let t=0;t<e.length;++t){const o=document.createElement("option");o.value=e[t];const r=e[t];o.appendChild(document.createTextNode(r)),n.appendChild(o)}}setSelectedPreset(e){const t=this.getToolId("WindowLevelPresets"),n=this.#a.getElementById(t);let o=0;for(o in n.options)if(n.options[o].value===e)break;n.selectedIndex=o}}function A(e){const t=document.createElement("table");let n,o;if(void 0===e||0===e.length)return n=t.insertRow(-1),o=document.createElement("td"),o.appendChild(document.createTextNode("Empty input array...")),n.appendChild(o),t;const r=e[0],a=Object.keys(r);for(let r=0;r<e.length;++r){n=t.insertRow(-1);for(let t=0;t<a.length;++t)o=document.createElement("td"),o.appendChild(document.createTextNode(e[r][a[t]])),n.appendChild(o)}const i=t.createTHead().insertRow(-1);for(let e=0;e<a.length;++e){const t=document.createElement("th");let n=a[e];n=n.charAt(0).toUpperCase()+n.slice(1),t.appendChild(document.createTextNode(n)),i.appendChild(t)}return t}function h(e,t){let n;var o;return!function(e){return void 0!==e["00020010"]}(e)?(o=e,n=function(e,t){return e.push({name:t,value:o[t].value}),e}):n=p(e,t,""),Object.keys(e).reduce(n,[])}function p(e,t,n){return function(o,a){const i=(0,r.getTagFromKey)(a);let l=i.getNameFromDictionary();void 0===l&&(l="x"+i.getKey());const d=l,s=e[a];let c=s.value;if(void 0===c.slice&&void 0!==c[t]&&(c=c[t]),"InstanceNumber"===d&&(c=t),"SQ"===s.vr){o.push({name:(n?n+" ":"")+d,value:""});for(let e=0;e<c.length;++e){const r=c[e],a=Object.keys(r).reduce(p(r,t,n+"["+e+"]"),[]);o=o.concat(a)}}else"O"===s.vr[0]&&c.length>10&&(c=c.slice(0,10).toString()+"... (len:"+c.length+")"),o.push({name:(n?n+" ":"")+d,value:c.toString()});return o}}class u{#n;#r;#a=document;#l="dropBox";#d="dropBox";#s="dropBoxBorder";#c="hover";constructor(e,t,n){this.#n=e,this.#r=t,void 0!==n&&(this.#a=n)}init(){this.showDropbox(!0)}#A=e=>{e.stopPropagation(),e.preventDefault()};#h=e=>{this.#A(e);const t=this.#a.getElementById(this.#l);t&&-1===t.className.indexOf(this.#c)&&(t.className+=" "+this.#c)};#p=e=>{this.#A(e);const t=this.#a.getElementById(this.#l);t&&-1!==t.className.indexOf(this.#c)&&(t.className=t.className.replace(" "+this.#c,""))};#u=e=>{this.#A(e),this.#n.loadFiles(e.dataTransfer.files)};#g=e=>{e.target&&e.target.files&&this.#n.loadFiles(e.target.files)};showDropbox(e){const t=this.#a.getElementById(this.#l);if(!t)return;const n=this.#a.getElementById("layerGroup-"+this.#r);if(e){if(t.className=this.#d+" "+this.#s,""===t.innerHTML){const e=document.createElement("p");e.appendChild(document.createTextNode("Drag and drop data here or "));const n=document.createElement("input");n.onchange=this.#g,n.type="file",n.multiple=!0,n.id="input-file",n.style.display="none";const o=document.createElement("label");o.htmlFor="input-file";const r=document.createElement("a");r.appendChild(document.createTextNode("click here")),r.id="input-file-link",o.appendChild(r),e.appendChild(n),e.appendChild(o),t.appendChild(e)}t.setAttribute("style","display:initial"),n&&(n.removeEventListener("dragover",this.#A),n.removeEventListener("dragleave",this.#A),n.removeEventListener("drop",this.#u)),t.addEventListener("dragover",this.#h),t.addEventListener("dragleave",this.#p),t.addEventListener("drop",this.#u)}else t.className=this.#d,t.innerHTML="",t.setAttribute("style","display:none"),t.removeEventListener("dragover",this.#h),t.removeEventListener("dragleave",this.#p),t.removeEventListener("drop",this.#u),n&&(n.addEventListener("dragover",this.#A),n.addEventListener("dragleave",this.#A),n.addEventListener("drop",this.#u))}}function g(e,t,n){const o={dataViewConfigs:{"*":[{divId:"layerGroup-"+e}]},tools:{Scroll:{},ZoomAndPan:{},WindowLevel:{},Draw:{options:["Ruler"]}}};void 0!==n&&(o.rootDocument=n);const a=new r.App;a.init(o);const i=Object.keys(o.tools),l=i.indexOf("WindowLevel");-1!==l&&i.splice(l+1,0,"WindowLevelPresets"),i.push("Reset"),i.push("ToggleOrientation"),i.push("Fullscreen"),i.push("Tags");const d=new c(a,i,e,n);d.init(),d.enableTools(!1);const s=function(e){e.ctrlKey&&88===e.keyCode&&(console.log("Abort load received from user (crtl-x)."),a.abortLoad())};let A,h,p,g;a.addEventListener("loadstart",(function(){A=0,h=0,p=0,g=!0,window.addEventListener("keydown",s),d.showProgressBar()})),a.addEventListener("loadprogress",(function(e){const t=Math.ceil(100*e.loaded/e.total);d.setProgress(t)})),a.addEventListener("load",(function(){d.setProgress(100)})),a.addEventListener("loaditem",(function(){++A})),a.addEventListener("renderend",(function(){if(g){g=!1,d.enableTools(!0);let e="ZoomAndPan";a.canScroll()?e="Scroll":d.enableTool("Scroll",!1),a.canWindowLevel()||d.enableTool("WindowLevel",!1),a.setTool(e),d.activateTool(e,!0);const n=a.getActiveLayerGroup().getActiveViewLayer().getViewController();let o,i=!1;if(void 0!==t&&void 0!==t.wlpreset){i=!0,o=t.wlpreset;const e={};e[o.name]={wl:[new r.WindowLevel(o.center,o.width)],name:o.name},n.addWindowLevelPresets(e)}d.updatePresets(n.getWindowLevelPresetsNames()),i&&(n.setWindowLevelPreset(o.name),d.setSelectedPreset(t.wlpreset.name))}})),a.addEventListener("error",(function(e){console.error(e.error),++h})),a.addEventListener("abort",(function(){++p})),a.addEventListener("loadend",(function(){if(h){let e="A load error has ";h>1&&(e=h+" load errors have "),e+="occured. See log for details.",alert(e)}0!==p&&console.warn("Data load was aborted."),window.removeEventListener("keydown",s)}));const v=new u(a,e,n);v.init(),a.addEventListener("loadstart",(function(){v.showDropbox(!1)})),a.addEventListener("loadend",(function(){A&&0===p||v.showDropbox(!0)})),a.addEventListener("keydown",(function(e){a.defaultOnKeydown(e)})),window.addEventListener("resize",a.onResize),a.addEventListener("wlchange",(function(){const e=a.getActiveLayerGroup().getActiveViewLayer().getViewController();d.updatePresets(e.getWindowLevelPresetsNames()),d.setSelectedPreset("manual")})),void 0!==t?void 0!==t.uri?a.loadFromUri(t.uri):void 0!==t.urls?a.loadURLs(t.urls):v.showDropbox(!0):v.showDropbox(!0)}var v=o(822);class b extends HTMLElement{constructor(){super()}connectedCallback(){let e;e=this.hasAttribute("id")?this.getAttribute("id"):window.crypto.randomUUID().substring(0,8);const t=document.createElement("div");t.id="dwv-"+e,t.className="dwv",t.part="dwv";const n=document.createElement("div");n.id="toolbar-"+e,n.className="toolbar",n.part="toolbar";const o=document.createElement("div");o.id="layerGroup-"+e,o.className="layerGroup",o.part="layerGroup";const a=document.createElement("div");if(a.id="dropBox",o.appendChild(a),t.appendChild(n),t.appendChild(o),this.hasAttribute("showlegend")){const n=document.createElement("a");n.href="https://github.com/ivmartel/dwv",n.title="dwv on github",n.appendChild(document.createTextNode("dwv"));const o=document.createElement("p");o.appendChild(document.createTextNode("Powered by ")),o.appendChild(n),o.appendChild(document.createTextNode(" "+(0,r.getDwvVersion)()+"."));const a=document.createElement("div");a.id="legend-"+e,a.className="legend",a.part="legend",a.appendChild(o),t.appendChild(a)}let i="";this.hasAttribute("height")?i+="height: "+this.getAttribute("height")+";":i+="height: 90%;",this.hasAttribute("width")&&(i+="width: "+this.getAttribute("width")+";");const l=document.createElement("style");l.innerHTML+=".dwv {"+i+"}\n\n",l.innerHTML+=v.A.toString();const d=this.attachShadow({mode:"open"});d.appendChild(l),d.appendChild(t);const s={};if(this.hasAttribute("uri"))s.uri=this.getAttribute("uri");else if(this.hasAttribute("urls")){const e=function(e){return e.trim()};s.urls=this.getAttribute("urls").split(",").map(e)}else this.hasAttribute("loadfromwindowlocation")&&""!==window.location.search&&(s.uri=window.location.href);this.hasAttribute("wlpresetname")&&this.hasAttribute("wlpresetcenter")&&this.hasAttribute("wlpresetwidth")&&(s.wlpreset={name:this.getAttribute("wlpresetname"),center:this.getAttribute("wlpresetcenter"),width:this.getAttribute("wlpresetwidth")}),g(e,s,d)}}customElements.define("dwv-simple",b);export{b as DwvComponent,g as startApp};
//# sourceMappingURL=dwvsimplistic.min.js.map