!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("dwv")):"function"==typeof define&&define.amd?define(["dwv"],t):"object"==typeof exports?exports.dwvsimplistic=t(require("dwv")):e.dwvsimplistic=t(e.dwv)}(this,(e=>(()=>{"use strict";var t={440:t=>{t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}function d(e,t,n){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,n)}function l(e,t){return e.get(v(e,t))}function c(e,t,n){return e.set(v(e,t),n),n}function v(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}r.r(o),r.d(o,{startApp:()=>x}),r(440);var u=new WeakMap,p=new WeakMap,f=new WeakMap,w=new WeakMap,m=new WeakMap,h=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,L=new WeakMap,E=new WeakMap,P=function(){return e=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,u,void 0),d(this,p,void 0),d(this,f,"dropBox"),d(this,w,"dropBox"),d(this,m,"dropBoxBorder"),d(this,h,"hover"),d(this,y,(function(e){e.stopPropagation(),e.preventDefault()})),d(this,g,(function(e){l(y,r).call(r,e);var t=document.getElementById(l(f,r));t&&-1===t.className.indexOf(l(h,r))&&(t.className+=" "+l(h,r))})),d(this,b,(function(e){l(y,r).call(r,e);var t=document.getElementById(l(f,r));t&&-1!==t.className.indexOf(l(h,r))&&(t.className=t.className.replace(" "+l(h,r),""))})),d(this,L,(function(e){l(y,r).call(r,e),l(u,r).loadFiles(e.dataTransfer.files)})),d(this,E,(function(e){e.target&&e.target.files&&l(u,r).loadFiles(e.target.files)})),c(u,this,t),c(p,this,n)},(t=[{key:"init",value:function(){this.showDropbox(!0)}},{key:"showDropbox",value:function(e){var t=document.getElementById(l(f,this));if(t){var n=document.getElementById("layerGroup-"+l(p,this));if(e){if(t.className=l(w,this)+" "+l(m,this),""===t.innerHTML){var r=document.createElement("p");r.appendChild(document.createTextNode("Drag and drop data here or "));var o=document.createElement("input");o.onchange=l(E,this),o.type="file",o.multiple=!0,o.id="input-file",o.style.display="none";var i=document.createElement("label");i.htmlFor="input-file";var a=document.createElement("a");a.appendChild(document.createTextNode("click here")),a.id="input-file-link",i.appendChild(a),r.appendChild(o),r.appendChild(i),t.appendChild(r)}t.setAttribute("style","display:initial"),n&&(n.removeEventListener("dragover",l(y,this)),n.removeEventListener("dragleave",l(y,this)),n.removeEventListener("drop",l(L,this))),t.addEventListener("dragover",l(g,this)),t.addEventListener("dragleave",l(b,this)),t.addEventListener("drop",l(L,this))}else t.className=l(w,this),t.innerHTML="",t.setAttribute("style","display:none"),t.removeEventListener("dragover",l(g,this)),t.removeEventListener("dragleave",l(b,this)),t.removeEventListener("drop",l(L,this)),n&&(n.addEventListener("dragover",l(y,this)),n.addEventListener("dragleave",l(y,this)),n.addEventListener("drop",l(L,this)))}}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function x(e,t){var n={dataViewConfigs:{"*":[{divId:"layerGroup-"+e}]},tools:{Scroll:{},ZoomAndPan:{},WindowLevel:{},Draw:{options:["Ruler"]}}},r=new dwv.App;r.init(n);var o=Object.keys(n.tools),i=o.indexOf("WindowLevel");-1!==i&&o.splice(i+1,0,"WindowLevelPresets"),o.push("Reset"),o.push("ToggleOrientation"),o.push("Fullscreen"),o.push("Tags");var a=new Gui(r,o,e);a.init(),a.enableTools(!1);var s=function(e){e.ctrlKey&&88===e.keyCode&&(console.log("Abort load received from user (crtl-x)."),r.abortLoad())},d=null,l=null,c=null,v=null;r.addEventListener("loadstart",(function(){d=0,l=0,c=0,v=!0,window.addEventListener("keydown",s),a.showProgressBar()})),r.addEventListener("loadprogress",(function(e){var t=Math.ceil(100*e.loaded/e.total);a.setProgress(t)})),r.addEventListener("load",(function(){a.setProgress(100)})),r.addEventListener("loaditem",(function(){++d})),r.addEventListener("renderend",(function(){if(v){v=!1,a.enableTools(!0);var e="ZoomAndPan";r.canScroll()?e="Scroll":a.enableTool("Scroll",!1),r.canWindowLevel()||a.enableTool("WindowLevel",!1),r.setTool(e),a.activateTool(e,!0);var n=r.getActiveLayerGroup().getActiveViewLayer().getViewController(),o=!1;if(void 0!==t&&void 0!==t.wlpreset){o=!0;var i=t.wlpreset,s={};s[i.name]={wl:[new dwv.WindowCenterAndWidth(i.center,i.width)],name:i.name},n.addWindowLevelPresets(s)}a.updatePresets(n.getWindowLevelPresetsNames()),o&&(n.setWindowLevelPreset(i.name),a.setSelectedPreset(t.wlpreset.name))}})),r.addEventListener("error",(function(e){console.error(e.error),++l})),r.addEventListener("abort",(function(){++c})),r.addEventListener("loadend",(function(){if(l){var e="A load error has ";l>1&&(e=l+" load errors have "),e+="occured. See log for details.",alert(e)}0!==c&&console.warn("Data load was aborted."),window.removeEventListener("keydown",s)}));var u=new P(r,e);u.init(),r.addEventListener("loadstart",(function(){u.showDropbox(!1)})),r.addEventListener("loadend",(function(){d&&0===c||u.showDropbox(!0)})),r.addEventListener("keydown",(function(e){r.defaultOnKeydown(e)})),window.addEventListener("resize",r.onResize),r.addEventListener("wlchange",(function(){var e=r.getActiveLayerGroup().getActiveViewLayer().getViewController();a.updatePresets(e.getWindowLevelPresetsNames()),a.setSelectedPreset("manual")})),void 0!==t&&void 0!==t.urls?r.loadURLs(t.urls):r.loadFromUri(window.location.href)}return o})()));
//# sourceMappingURL=dwvsimplistic.min.js.map