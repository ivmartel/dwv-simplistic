{"version":3,"file":"dwvsimplistic.min.js","mappings":"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","sources":["webpack://dwv-simplistic/webpack/universalModuleDefinition","webpack://dwv-simplistic/external umd {\"root\":\"dwv\",\"commonjs\":\"dwv\",\"commonjs2\":\"dwv\",\"amd\":\"dwv\"}","webpack://dwv-simplistic/webpack/bootstrap","webpack://dwv-simplistic/webpack/runtime/define property getters","webpack://dwv-simplistic/webpack/runtime/hasOwnProperty shorthand","webpack://dwv-simplistic/webpack/runtime/make namespace object","webpack://dwv-simplistic/./src/gui/dropboxLoader.js","webpack://dwv-simplistic/./src/applauncher.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"dwv\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"dwv\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dwvsimplistic\"] = factory(require(\"dwv\"));\n\telse\n\t\troot[\"dwvsimplistic\"] = factory(root[\"dwv\"]);\n})(this, (__WEBPACK_EXTERNAL_MODULE__440__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__440__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// doc imports\n/* eslint-disable no-unused-vars */\nimport {App} from 'dwv';\n/* eslint-enable no-unused-vars */\n\n/**\n * Dropbox loader.\n * Listens to drag events on the layer container and\n *   uses a drop box element as first display.\n *\n * @class\n */\nexport class DropboxLoader {\n\n  /**\n   * The associated app.\n   *\n   * @type {App}\n   */\n  #app;\n\n  /**\n   * The GUI UID.\n   *\n   * @type {string}\n   */\n  #uid;\n\n  // drop box class name\n  #dropboxDivId = 'dropBox';\n  #dropboxClassName = 'dropBox';\n  #borderClassName = 'dropBoxBorder';\n  #hoverClassName = 'hover';\n\n  /**\n   * @param {App} app The associated application.\n   * @param {string} uid The GUI UID.\n   */\n  constructor(app, uid) {\n    this.#app = app;\n    this.#uid = uid;\n  }\n\n  /**\n   * Initialise the drop box.\n   */\n  init() {\n    this.showDropbox(true);\n  };\n\n  /**\n   * Basic handle drag event.\n   *\n   * @private\n   * @param {object} event The event to handle.\n   */\n  #defaultHandleDragEvent = (event) => {\n    // prevent default handling\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  /**\n   * Handle a drag over.\n   *\n   * @private\n   * @param {object} event The event to handle.\n   */\n  #onBoxDragOver = (event) => {\n    this.#defaultHandleDragEvent(event);\n    // update box border\n    var box = document.getElementById(this.#dropboxDivId);\n    if (box && box.className.indexOf(this.#hoverClassName) === -1) {\n      box.className += ' ' + this.#hoverClassName;\n    }\n  };\n\n  /**\n   * Handle a drag leave.\n   *\n   * @private\n   * @param {object} event The event to handle.\n   */\n  #onBoxDragLeave = (event) => {\n    this.#defaultHandleDragEvent(event);\n    // update box border\n    var box = document.getElementById(this.#dropboxDivId);\n    if (box && box.className.indexOf(this.#hoverClassName) !== -1) {\n      box.className = box.className.replace(' ' + this.#hoverClassName, '');\n    }\n  };\n\n  /**\n   * Handle a drop event.\n   *\n   * @private\n   * @param {object} event The event to handle.\n   */\n  #onDrop = (event) => {\n    this.#defaultHandleDragEvent(event);\n    // load files\n    this.#app.loadFiles(event.dataTransfer.files);\n  };\n\n  /**\n   * Handle a an input[type:file] change event.\n   *\n   * @param {object} event The event to handle.\n   */\n  #onInputFile = (event) => {\n    if (event.target && event.target.files) {\n      this.#app.loadFiles(event.target.files);\n    }\n  };\n\n  /**\n   * Show or hide the data load drop box.\n   *\n   * @param {boolean} show Flag to show or hide.\n   */\n  showDropbox(show) {\n    var box = document.getElementById(this.#dropboxDivId);\n    if (!box) {\n      return;\n    }\n    var layerDiv = document.getElementById('layerGroup-' + this.#uid);\n\n    if (show) {\n      // reset css class\n      box.className = this.#dropboxClassName + ' ' + this.#borderClassName;\n      // add content if empty\n      if (box.innerHTML === '') {\n        var p = document.createElement('p');\n        p.appendChild(document.createTextNode('Drag and drop data here or '));\n        // input file\n        var input = document.createElement('input');\n        input.onchange = this.#onInputFile;\n        input.type = 'file';\n        input.multiple = true;\n        input.id = 'input-file';\n        input.style.display = 'none';\n        var label = document.createElement('label');\n        label.htmlFor = 'input-file';\n        var link = document.createElement('a');\n        link.appendChild(document.createTextNode('click here'));\n        link.id = 'input-file-link';\n        label.appendChild(link);\n        p.appendChild(input);\n        p.appendChild(label);\n\n        box.appendChild(p);\n      }\n      // show box\n      box.setAttribute('style', 'display:initial');\n      // stop layer listening\n      if (layerDiv) {\n        layerDiv.removeEventListener('dragover', this.#defaultHandleDragEvent);\n        layerDiv.removeEventListener('dragleave', this.#defaultHandleDragEvent);\n        layerDiv.removeEventListener('drop', this.#onDrop);\n      }\n      // listen to box events\n      box.addEventListener('dragover', this.#onBoxDragOver);\n      box.addEventListener('dragleave', this.#onBoxDragLeave);\n      box.addEventListener('drop', this.#onDrop);\n    } else {\n      // remove border css class\n      box.className = this.#dropboxClassName;\n      // remove content\n      box.innerHTML = '';\n      // hide box\n      box.setAttribute('style', 'display:none');\n      // stop box listening\n      box.removeEventListener('dragover', this.#onBoxDragOver);\n      box.removeEventListener('dragleave', this.#onBoxDragLeave);\n      box.removeEventListener('drop', this.#onDrop);\n      // listen to layer events\n      if (layerDiv) {\n        layerDiv.addEventListener('dragover', this.#defaultHandleDragEvent);\n        layerDiv.addEventListener('dragleave', this.#defaultHandleDragEvent);\n        layerDiv.addEventListener('drop', this.#onDrop);\n      }\n    }\n  };\n}; // DropboxLoader\n","import {Guiii} from './appgui';\nimport {DropboxLoader} from './gui/dropboxLoader';\n\n/**\n * Application launcher.\n *\n * @param {string} uid The app uid.\n * @param {object} [options] Start options:\n * - urls (string[]): list of urls to load,\n * - wlpreset (object): default window level preset.\n */\nexport function startApp(uid, options) {\n  // app options\n  var appOptions = {\n    dataViewConfigs: {'*': [{divId: 'layerGroup-' + uid}]},\n    tools: {\n      Scroll: {},\n      ZoomAndPan: {},\n      WindowLevel: {},\n      Draw: {\n        options: ['Ruler']\n      }\n    }\n  };\n  // main application\n  var dwvApp = new dwv.App();\n  dwvApp.init(appOptions);\n\n  // app gui\n  var guiTools = Object.keys(appOptions.tools);\n  var wlIndex = guiTools.indexOf('WindowLevel');\n  if (wlIndex !== -1) {\n    guiTools.splice(wlIndex + 1, 0, 'WindowLevelPresets');\n  }\n  guiTools.push('Reset');\n  guiTools.push('ToggleOrientation');\n  guiTools.push('Fullscreen');\n  guiTools.push('Tags');\n  var dwvAppGui = new Gui(dwvApp, guiTools, uid);\n  dwvAppGui.init();\n  dwvAppGui.enableTools(false);\n\n  // abort shortcut listener\n  var abortOnCrtlX = function (event) {\n    if (event.ctrlKey && event.keyCode === 88) {\n      // crtl-x\n      console.log('Abort load received from user (crtl-x).');\n      dwvApp.abortLoad();\n    }\n  };\n\n  // handle load events\n  var nLoadItem = null;\n  var nReceivedLoadError = null;\n  var nReceivedLoadAbort = null;\n  var isFirstRender = null;\n  dwvApp.addEventListener('loadstart', function (/*event*/) {\n    // reset counts\n    nLoadItem = 0;\n    nReceivedLoadError = 0;\n    nReceivedLoadAbort = 0;\n    isFirstRender = true;\n    // allow to cancel via crtl-x\n    window.addEventListener('keydown', abortOnCrtlX);\n    // show progress bar\n    dwvAppGui.showProgressBar();\n  });\n  dwvApp.addEventListener('loadprogress', function (event) {\n    var percent = Math.ceil(event.loaded * 100 / event.total);\n    // set progress (hides the bar is percent=100)\n    dwvAppGui.setProgress(percent);\n  });\n  dwvApp.addEventListener('load', function (/*event*/) {\n    // force hidding in case 100% progress was not sent\n    dwvAppGui.setProgress(100);\n  });\n  dwvApp.addEventListener('loaditem', function (/*event*/) {\n    ++nLoadItem;\n  });\n  dwvApp.addEventListener('renderend', function (/*event*/) {\n    if (isFirstRender) {\n      isFirstRender = false;\n      // enable tools\n      dwvAppGui.enableTools(true);\n      // set the selected tool\n      var selectedTool = 'ZoomAndPan';\n      if (dwvApp.canScroll()) {\n        selectedTool = 'Scroll';\n      } else {\n        dwvAppGui.enableTool('Scroll', false);\n      }\n      if (!dwvApp.canWindowLevel()) {\n        dwvAppGui.enableTool('WindowLevel', false);\n      }\n      dwvApp.setTool(selectedTool);\n      dwvAppGui.activateTool(selectedTool, true);\n      // update presets\n      var lg = dwvApp.getActiveLayerGroup();\n      var vl = lg.getActiveViewLayer();\n      var viewController = vl.getViewController();\n      // optional wl preset\n      var hasExtraPreset = false;\n      if (typeof options !== 'undefined' &&\n        typeof options.wlpreset !== 'undefined') {\n        hasExtraPreset = true;\n        var wlpreset = options.wlpreset;\n        var presets = {};\n        presets[wlpreset.name] = {\n          wl: [new dwv.WindowCenterAndWidth(wlpreset.center, wlpreset.width)],\n          name: wlpreset.name\n        };\n        viewController.addWindowLevelPresets(presets);\n      }\n      // update GUI\n      dwvAppGui.updatePresets(\n        viewController.getWindowLevelPresetsNames()\n      );\n      // select optional preset\n      if (hasExtraPreset) {\n        viewController.setWindowLevelPreset(wlpreset.name);\n        dwvAppGui.setSelectedPreset(options.wlpreset.name);\n      }\n    }\n  });\n  dwvApp.addEventListener('error', function (event) {\n    console.error(event.error);\n    ++nReceivedLoadError;\n  });\n  dwvApp.addEventListener('abort', function (/*event*/) {\n    ++nReceivedLoadAbort;\n  });\n  dwvApp.addEventListener('loadend', function (/*event*/) {\n    // show alert for errors\n    if (nReceivedLoadError) {\n      var message = 'A load error has ';\n      if (nReceivedLoadError > 1) {\n        message = nReceivedLoadError + ' load errors have ';\n      }\n      message += 'occured. See log for details.';\n      alert(message);\n    }\n    // console warn for aborts\n    if (nReceivedLoadAbort !== 0) {\n      console.warn('Data load was aborted.');\n    }\n    // stop listening for crtl-x\n    window.removeEventListener('keydown', abortOnCrtlX);\n  });\n\n  // setup drop box\n  var dropBoxLoader = new DropboxLoader(dwvApp, uid);\n  dropBoxLoader.init();\n  // show/hide drop box\n  dwvApp.addEventListener('loadstart', function (/*event*/) {\n    // hide drop box\n    dropBoxLoader.showDropbox(false);\n  });\n  dwvApp.addEventListener('loadend', function (/*event*/) {\n    // show the drop box if no item were received or\n    // if the load was aborted\n    if (!nLoadItem ||\n      nReceivedLoadAbort !== 0) {\n      dropBoxLoader.showDropbox(true);\n    }\n  });\n\n  // handle key events\n  dwvApp.addEventListener('keydown', function (event) {\n    dwvApp.defaultOnKeydown(event);\n  });\n  // handle window resize\n  window.addEventListener('resize', dwvApp.onResize);\n\n  // listen to 'wlchange'\n  dwvApp.addEventListener('wlchange', function (/*event*/) {\n    // update presets (in case new was added)\n    var lg = dwvApp.getActiveLayerGroup();\n    var vl = lg.getActiveViewLayer();\n    var viewController = vl.getViewController();\n    dwvAppGui.updatePresets(\n      viewController.getWindowLevelPresetsNames()\n    );\n    // suppose it is a manual change so switch preset to manual\n    dwvAppGui.setSelectedPreset('manual');\n  });\n\n  // load from options.urls if defined\n  if (typeof options !== 'undefined' &&\n    typeof options.urls !== 'undefined') {\n    dwvApp.loadURLs(options.urls);\n  } else {\n    // possible load from location\n    dwvApp.loadFromUri(window.location.href);\n  }\n};\n"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__440__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","_app","WeakMap","_uid","_dropboxDivId","_dropboxClassName","_borderClassName","_hoverClassName","_defaultHandleDragEvent","_onBoxDragOver","_onBoxDragLeave","_onDrop","_onInputFile","DropboxLoader","app","uid","_this","_classCallCheck","_classPrivateFieldInitSpec","event","stopPropagation","preventDefault","_classPrivateFieldGet","box","document","getElementById","className","indexOf","replace","loadFiles","dataTransfer","files","target","_classPrivateFieldSet","showDropbox","show","layerDiv","innerHTML","p","createElement","appendChild","createTextNode","input","onchange","type","multiple","id","style","display","label","htmlFor","link","setAttribute","removeEventListener","addEventListener","startApp","options","appOptions","dataViewConfigs","divId","tools","Scroll","ZoomAndPan","WindowLevel","Draw","dwvApp","dwv","App","init","guiTools","keys","wlIndex","splice","push","dwvAppGui","Gui","enableTools","abortOnCrtlX","ctrlKey","keyCode","console","log","abortLoad","nLoadItem","nReceivedLoadError","nReceivedLoadAbort","isFirstRender","window","showProgressBar","percent","Math","ceil","loaded","total","setProgress","selectedTool","canScroll","enableTool","canWindowLevel","setTool","activateTool","viewController","getActiveLayerGroup","getActiveViewLayer","getViewController","hasExtraPreset","wlpreset","presets","name","wl","WindowCenterAndWidth","center","width","addWindowLevelPresets","updatePresets","getWindowLevelPresetsNames","setWindowLevelPreset","setSelectedPreset","error","message","alert","warn","dropBoxLoader","defaultOnKeydown","onResize","urls","loadURLs","loadFromUri","location","href"],"sourceRoot":""}