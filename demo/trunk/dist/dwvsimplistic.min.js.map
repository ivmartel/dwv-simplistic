{"version":3,"file":"dwvsimplistic.min.js","mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,QACR,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,CAAC,OAAQJ,GACU,iBAAZC,QACdA,QAAuB,cAAID,EAAQG,QAAQ,QAE3CJ,EAAoB,cAAIC,EAAQD,EAAU,IAC3C,CATD,CASGO,MAAOC,G,kCCTVL,EAAOD,QAAUM,C,GCCbC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaV,QAGrB,IAAIC,EAASM,EAAyBE,GAAY,CAGjDT,QAAS,CAAC,GAOX,OAHAY,EAAoBH,GAAUR,EAAQA,EAAOD,QAASQ,GAG/CP,EAAOD,OACf,CCrBAQ,EAAoBK,EAAI,CAACb,EAASc,KACjC,IAAI,IAAIC,KAAOD,EACXN,EAAoBQ,EAAEF,EAAYC,KAASP,EAAoBQ,EAAEhB,EAASe,IAC5EE,OAAOC,eAAelB,EAASe,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDP,EAAoBQ,EAAI,CAACK,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFd,EAAoBkB,EAAK1B,IACH,oBAAX2B,QAA0BA,OAAOC,aAC1CX,OAAOC,eAAelB,EAAS2B,OAAOC,YAAa,CAAEC,MAAO,WAE7DZ,OAAOC,eAAelB,EAAS,aAAc,CAAE6B,OAAO,GAAO,E,4mCCK9D,IAAMC,EAAS,CAEbC,OAAQ,6EAERC,WAAY,0PAEZC,YAAa,2WAEbC,KAAM,4SAENC,MAAO,sOAEPC,kBAAmB,owBAEnBC,WAAY,+EAEZC,KAAM,gSAWR,SAASC,EAAcC,EAAUC,GAC/B,IAAMC,EAAQ,6BACRC,EAAOC,SAASC,gBAAgBH,EAAO,QAC7CC,EAAKG,eAAe,KAAM,IAAKhB,EAAOU,IACtC,IAAMO,EAAMH,SAASC,gBAAgBH,EAAO,OAC5CK,EAAID,eAAe,KAAM,SAAU,IACnCC,EAAID,eAAe,KAAM,QAAS,IAClCC,EAAID,eAAe,KAAM,UAAW,kBACpCC,EAAIC,YAAYL,GAChB,IAAMM,EAASL,SAASM,cAAc,UA0BtC,OAzBAD,EAAOE,GAAKV,EAAOW,UAAUZ,GAC7BS,EAAOI,MAAQb,EACfS,EAAOD,YAAYD,GAEF,UAAbP,EACFS,EAAOK,iBAAiB,SAAS,WAC/Bb,EAAOc,gBACT,IACsB,sBAAbf,EACTS,EAAOK,iBAAiB,SAAS,WAC/Bb,EAAOe,mBACT,IACsB,eAAbhB,EACTS,EAAOK,iBAAiB,SAAS,WAC/Bb,EAAOgB,kBACT,IACsB,SAAbjB,EACTS,EAAOK,iBAAiB,SAAS,WAC/Bb,EAAOiB,eACT,IAEAT,EAAOK,iBAAiB,SAAS,WAC/Bb,EAAOkB,aAAanB,EACtB,IAEKS,CACT,CASA,SAASW,EAAUpB,EAAUC,GAC3B,IAAMoB,EAASjB,SAASM,cAAc,UACtCW,EAAOhC,MAAQ,GACfgC,EAAOb,YAAYJ,SAASkB,eAAe,cAC3C,IAAMC,EAASnB,SAASM,cAAc,UAOtC,OANAa,EAAOZ,GAAKV,EAAOW,UAAUZ,GAC7BuB,EAAOV,MAAQ,uBACfU,EAAOf,YAAYa,GACnBE,EAAOT,iBAAiB,UAAU,WAChCb,EAAOuB,eAAe3D,KAAKwB,MAC7B,IACOkC,CACT,CAEA,IAAAE,EAAA,IAAAC,QAAAC,EAAA,IAAAD,QAAAE,EAAA,IAAAF,QAAAG,EAAA,IAAAH,QAAAI,EAAA,IAAAJ,QAAAK,EAAA,IAAAL,QAGaM,EAAG,WA0Db,O,EAPD,SAAAA,EAAYC,EAAKC,EAAOC,EAAKC,I,4FAASC,CAAA,KAAAL,GA5CtCM,EAAA,KAAAb,OAAY,GAOZa,EAAA,KAAAX,OAAY,GAOZW,EAAA,KAAAV,OAAI,GAOJU,EAAA,KAAAT,OAAM,GAONS,EAAA,KAAAR,OAAI,GAOJQ,EAAA,KAAAP,EAAW3B,UAUTmC,EAAKX,EAAL/D,KAAYoE,GACZM,EAAKV,EAALhE,KAAcqE,GACdK,EAAKT,EAALjE,KAAYsE,QACW,IAAZC,GACTG,EAAKR,EAALlE,KAAgBuE,EAEpB,G,EAAC,EAAA7D,IAAA,OAAAc,MAKD,WAEE,IADA,IAAMmD,EAAUC,EAAKV,EAALlE,MAAc6E,eAAe7E,KAAK8E,mBACzCC,EAAI,EAAGA,EAAIH,EAAKZ,EAALhE,MAAYgF,SAAUD,EACjB,uBAAnBH,EAAKZ,EAALhE,MAAY+E,GACdJ,EAAQhC,YAAYY,EAAUqB,EAAKZ,EAALhE,MAAY+E,GAAI/E,OAE9C2E,EAAQhC,YAAYT,EAAc0C,EAAKZ,EAALhE,MAAY+E,GAAI/E,MAGxD,GAAC,CAAAU,IAAA,kBAAAc,MAMD,WACE,IAAMyD,EAAW1C,SAASM,cAAc,YACxCoC,EAASnC,GAAK,YAAc8B,EAAKX,EAALjE,MAC5BiF,EAASC,IAAM,MACfD,EAASzD,MAAQ,IAENoD,EAAKV,EAALlE,MAAc6E,eAAe7E,KAAK8E,mBAC1CnC,YAAYsC,EACjB,GAAC,CAAAvE,IAAA,cAAAc,MAQD,SAAY2D,GACV,IAAMF,EAAWL,EAAKV,EAALlE,MAAc6E,eAAe,YAAcD,EAAKX,EAALjE,OACxDiF,IACc,MAAZE,EAEFF,EAASG,SAGTH,EAASzD,MAAQ2D,EAGvB,GAAC,CAAAzE,IAAA,cAAAc,MAOD,WACE,MAAO,OAASoD,EAAKX,EAALjE,KAClB,GAAC,CAAAU,IAAA,qBAAAc,MAOD,WACE,MAAO,cAAgBoD,EAAKX,EAALjE,KACzB,GAAC,CAAAU,IAAA,kBAAAc,MAOD,WACE,MAAO,WAAaoD,EAAKX,EAALjE,KACtB,GAAC,CAAAU,IAAA,YAAAc,MAQD,SAAUW,GACR,OAAOA,EAASkD,cAAgB,IAAMT,EAAKX,EAALjE,KACxC,GAAC,CAAAU,IAAA,aAAAc,MAQD,SAAW8D,EAAMC,GACf,IAAMC,EAASxF,KAAK+C,UAAUuC,GAC9BV,EAAKV,EAALlE,MAAc6E,eAAeW,GAAQC,UAAYF,CACnD,GAAC,CAAA7E,IAAA,cAAAc,MAOD,SAAY+D,GACV,IAAK,IAAIR,EAAI,EAAGA,EAAIH,EAAKZ,EAALhE,MAAYgF,SAAUD,EACxC/E,KAAK0F,WAAWd,EAAKZ,EAALhE,MAAY+E,GAAIQ,EAEpC,GAAC,CAAA7E,IAAA,eAAAc,MAQD,SAAa8D,EAAMC,GACjB,IAAMC,EAASxF,KAAK+C,UAAUuC,GAC1BC,EACFX,EAAKV,EAALlE,MAAc6E,eAAeW,GAAQG,UAAUC,IAAI,UAEnDhB,EAAKV,EAALlE,MAAc6E,eAAeW,GAAQG,UAAUP,OAAO,SAE1D,GAAC,CAAA1E,IAAA,gBAAAc,MAOD,SAAc+D,GACZ,IAAK,IAAIR,EAAI,EAAGA,EAAIH,EAAKZ,EAALhE,MAAYgF,SAAUD,EACxC/E,KAAK6F,aAAajB,EAAKZ,EAALhE,MAAY+E,GAAIQ,EAEtC,GAAC,CAAA7E,IAAA,iBAAAc,MAOD,SAAe8D,GAEbV,EAAKb,EAAL/D,MAAU8F,qBAAqBR,GAE/BtF,KAAK+F,kBAAkBT,EACzB,GAAC,CAAA5E,IAAA,eAAAc,MAOD,SAAa8D,GACXtF,KAAKgG,eAAc,GACnBhG,KAAK6F,aAAaP,GAAM,GACxBV,EAAKb,EAAL/D,MAAUiG,QAAQX,GACL,SAATA,GACFV,EAAKb,EAAL/D,MAAUkG,gBAAgB,CAACC,UAAW,SAE1C,GAAC,CAAAzF,IAAA,iBAAAc,MAKD,WACEoD,EAAKb,EAAL/D,MAAUoG,eAEV,IAAMC,EAAYrG,KAAK+C,UAAU,sBACd6B,EAAKV,EAALlE,MAAc6E,eAAewB,GACrCC,cAAgB,CAC7B,GAAC,CAAA5F,IAAA,oBAAAc,MAKD,gBACmC,IAAtBoD,EAAKhB,EAAL5D,MACiB,UAAtB4E,EAAKhB,EAAL5D,MACF0E,EAAKd,EAAL5D,KAAoB,WACW,YAAtB4E,EAAKhB,EAAL5D,MACT0E,EAAKd,EAAL5D,KAAoB,YACW,aAAtB4E,EAAKhB,EAAL5D,OACT0E,EAAKd,EAAL5D,KAAoB,SAItB0E,EAAKd,EAAL5D,KAAoB,WAGtB,IAAMuG,EAAS,CACb,IAAK,CACH,CACEC,MAAOxG,KAAKyG,qBACZC,YAAa9B,EAAKhB,EAAL5D,SAInB4E,EAAKb,EAAL/D,MAAU2G,mBAAmBJ,GAG7B,IADA,IAAMK,EAAUhC,EAAKb,EAAL/D,MAAU6G,aACjB9B,EAAI,EAAGA,EAAI6B,EAAQ5B,SAAUD,EACpCH,EAAKb,EAAL/D,MAAU8G,OAAOF,EAAQ7B,GAE7B,GAAC,CAAArE,IAAA,mBAAAc,MAKD,WAAmB,IAAAuF,EAAA,KACXC,EAAUhH,KAAKyG,qBACfQ,EAAYrC,EAAKV,EAALlE,MAAc6E,eAAemC,GAM/C,GAAKzE,SAAS2E,kBAUH3E,SAAS4E,iBAClB5E,SAAS4E,iBAETF,EAAUG,MAAMC,OAASzC,EAAKd,EAAL9D,WAbM,CAC/B,IAAMsH,EAAUtH,KAAKuH,cACH3C,EAAKV,EAALlE,MAAc6E,eAAeyC,GACrCE,oBAAoBC,MAAK,WAIjC/C,EAAKZ,EAALiD,EAAoBE,EAAUG,MAAMC,QACpCJ,EAAUG,MAAMC,OAAS,MAC3B,GACF,CAKF,GAAC,CAAA3G,IAAA,gBAAAc,MAKD,WAEE,IAAMkG,EAAWnF,SAASM,cAAc,OACxC6E,EAASC,UAAY,QACrBD,EAAS5E,GAAK,SAAW8B,EAAKX,EAALjE,MACzB0H,EAASN,MAAMQ,QAAU,QAEzBhD,EAAKV,EAALlE,MAAciD,iBAAiB,SAAS,SAAU4E,GAC5CA,EAAMC,SAAWJ,IACnBA,EAASN,MAAMQ,QAAU,OAE7B,IAEA,IAAMG,EAAkBxF,SAASM,cAAc,OAC/CkF,EAAgBJ,UAAY,gBAC5BI,EAAgBjF,GAAK,iBAAmB8B,EAAKX,EAALjE,MACxC0H,EAAS/E,YAAYoF,GAErB,IAAMC,EAAazF,SAASM,cAAc,MAC1CmF,EAAWrF,YAAYJ,SAASkB,eAAe,eAC/CsE,EAAgBpF,YAAYqF,GAG5B,IAAMC,EAAiB1F,SAASM,cAAc,OAC9CoF,EAAeN,UAAY,uBAE3B,IAIIO,EAJEC,EAAWvD,EAAKb,EAAL/D,MAAUoI,YAAY,KAGjCC,EAAkBF,EAAS,YAEjC,QAA+B,IAApBE,EAAiC,CAE1C,IAAIC,EAAsBD,EAAgB7G,MACP,iBAAxB8G,IACTA,EAAsB,CAACA,KAGzBJ,EAAkBI,EAAoBC,IAAIC,SAE1BC,MAAK,SAAUC,EAAGC,GAChC,OAAOD,EAAIC,CACb,GACF,CAEA,IAAIC,EAAiBV,EAAgB,GAE/BW,EAAStG,SAASM,cAAc,SACtCgG,EAAOC,KAAO,QACdD,EAAO/F,GAAK,yBAA2B8B,EAAKX,EAALjE,MACvC6I,EAAOE,IAAM,EACbF,EAAO3D,IAAMgD,EAAgBlD,OAAS,EACtC6D,EAAOrH,MAAQ,EACfqH,EAAO7F,MAAQ,kBACf,IAAMgG,EAAczG,SAASM,cAAc,SAC3CmG,EAAYlG,GAAK,+BAAiC8B,EAAKX,EAALjE,MAClDgJ,EAAW,IAAOH,EAAO/F,GACzBkG,EAAYrG,YAAYJ,SAASkB,eAAemF,IAChDI,EAAYhG,MAAQ6F,EAAO7F,MAE3B,IAAMiG,EAAa1G,SAASM,cAAc,KAC1CoG,EAAWtG,YAAYkG,GACvBI,EAAWtG,YAAYqG,GACvBjB,EAAgBpF,YAAYsG,GAE5BJ,EAAO5F,iBAAiB,SAAS,SAAU4E,GACzCe,EAAiBV,EAAgBL,EAAMC,OAAOtG,OAC9C,IACM0H,EAAUC,EADAC,EAAajB,EAAUS,IAEvCX,EAAeoB,gBAAgBH,GAC/BF,EAAYK,gBAAgB9G,SAASkB,eAAemF,GACtD,IAGA,IACMU,EAAYH,EADAC,EAAajB,EAAUS,IAEzCX,EAAetF,YAAY2G,GAC3BvB,EAAgBpF,YAAYsF,GAGVrD,EAAKV,EAALlE,MAAc6E,eAAe7E,KAAKuH,eAC1C5E,YAAY+E,EACxB,GAAC,CAAAhH,IAAA,gBAAAc,MAOD,SAAc+H,GAIZ,IAHA,IAAMlD,EAAYrG,KAAK+C,UAAU,sBAC3ByG,EAAa5E,EAAKV,EAALlE,MAAc6E,eAAewB,GAEzCmD,EAAWC,iBAChBD,EAAWE,YAAYF,EAAWG,YAGpC,IAAK,IAAI5E,EAAI,EAAGA,EAAIwE,EAAQvE,SAAUD,EAAG,CACvC,IAAMvB,EAASjB,SAASM,cAAc,UACtCW,EAAOhC,MAAQ+H,EAAQxE,GACvB,IAAM6E,EAAQL,EAAQxE,GACtBvB,EAAOb,YAAYJ,SAASkB,eAAemG,IAC3CJ,EAAW7G,YAAYa,EACzB,CACF,GAAC,CAAA9C,IAAA,oBAAAc,MAOD,SAAkB8D,GAChB,IAAMe,EAAYrG,KAAK+C,UAAU,sBAC3ByG,EAAa5E,EAAKV,EAALlE,MAAc6E,eAAewB,GAE5CwD,EAAQ,EACZ,IAAKA,KAASL,EAAWM,QACvB,GAAIN,EAAWM,QAAQD,GAAOrI,QAAU8D,EACtC,MAIJkE,EAAWlD,cAAgBuD,CAC7B,M,6EAAC,CAhaa,GA0ahB,SAASV,EAAiBY,GACxB,IACIC,EACAC,EAFEC,EAAQ3H,SAASM,cAAc,SAKrC,QAAmB,IAARkH,GACM,IAAfA,EAAI/E,OAKJ,OAJAgF,EAAME,EAAMC,WAAW,IACvBF,EAAO1H,SAASM,cAAc,OACzBF,YAAYJ,SAASkB,eAAe,yBACzCuG,EAAIrH,YAAYsH,GACTC,EAQT,IAJA,IAAME,EAAQL,EAAI,GACZM,EAAOzJ,OAAOyJ,KAAKD,GAGhBrF,EAAI,EAAGA,EAAIgF,EAAI/E,SAAUD,EAAG,CACnCiF,EAAME,EAAMC,WAAW,GACvB,IAAK,IAAIG,EAAI,EAAGA,EAAID,EAAKrF,SAAUsF,GACjCL,EAAO1H,SAASM,cAAc,OACzBF,YAAYJ,SAASkB,eAAesG,EAAIhF,GAAGsF,EAAKC,MACrDN,EAAIrH,YAAYsH,EAEpB,CAIA,IAFA,IACMM,EADQL,EAAMM,cACHL,WAAW,GACnBM,EAAI,EAAGA,EAAIJ,EAAKrF,SAAUyF,EAAG,CACpC,IAAMC,EAAQnI,SAASM,cAAc,MACjCnC,EAAM2J,EAAKI,GACf/J,EAAMA,EAAIiK,OAAO,GAAGC,cAAgBlK,EAAImK,MAAM,GAC9CH,EAAM/H,YAAYJ,SAASkB,eAAe/C,IAC1C6J,EAAG5H,YAAY+H,EACjB,CAEA,OAAOR,CACT,CASA,SAASd,EAAa0B,EAAMlC,GAC1B,IAAImC,EA2BiBC,EApBrB,OASF,SAAqBF,GAEnB,YAAmC,IAArBA,EAAK,WACrB,CAlBMG,CAAYH,GACdC,EAAUG,EAAmBJ,EAAMlC,EAAgB,KAyBhCoC,EAvBKF,EAAxBC,EAwBK,SAAUI,EAAaC,GAK5B,OAJAD,EAAYE,KAAK,CACf/F,KAAM8F,EACN5J,MAAOwJ,EAAQI,GAAc5J,QAExB2J,CACT,GA5BavK,OAAOyJ,KAAKS,GACbQ,OAAOP,EAAS,GAC9B,CAqCA,SAASG,EAAmBF,EAASpC,EAAgB2C,GACnD,OAAO,SAAUJ,EAAaC,GAC5B,IAAMI,GAAMC,EAAAA,EAAAA,eAAcL,GACtB1K,EAAM8K,EAAIE,6BACK,IAARhL,IAETA,EAAM,IAAM8K,EAAIG,UAElB,IAAMrG,EAAO5E,EACPkL,EAAUZ,EAAQI,GACpB5J,EAAQoK,EAAQpK,MAYpB,QAT2B,IAAhBA,EAAMqJ,YACkB,IAA1BrJ,EAAMoH,KACbpH,EAAQA,EAAMoH,IAGH,mBAATtD,IACF9D,EAAQoH,GAGS,OAAfgD,EAAQC,GAAa,CAEvBV,EAAYE,KAAK,CACf/F,MAAOiG,EAASA,EAAS,IAAM,IAAMjG,EACrC9D,MAAO,KAGT,IAAK,IAAIuD,EAAI,EAAGA,EAAIvD,EAAMwD,SAAUD,EAAG,CACrC,IAAM+G,EAAUtK,EAAMuD,GAEhBgH,EADOnL,OAAOyJ,KAAKyB,GACRR,OACfJ,EACEY,EAASlD,EAAgB2C,EAAS,IAAMxG,EAAI,KAAM,IAEtDoG,EAAcA,EAAYa,OAAOD,EACnC,CACF,KAEwB,MAAlBH,EAAQC,GAAG,IAAcrK,EAAMwD,OAAS,KAC1CxD,EAAQA,EAAMqJ,MAAM,EAAG,IAAIoB,WACzB,YAAczK,EAAMwD,OAAS,KAEjCmG,EAAYE,KAAK,CACf/F,MAAOiG,EAASA,EAAS,IAAM,IAAMjG,EACrC9D,MAAOA,EAAMyK,aAGjB,OAAOd,CACT,CACF,C,miCC1pBA,IAAApH,EAAA,IAAAF,QAAAI,EAAA,IAAAJ,QAAAK,EAAA,IAAAL,QAAAqI,EAAA,IAAArI,QAAAsI,EAAA,IAAAtI,QAAAuI,EAAA,IAAAvI,QAAAwI,EAAA,IAAAxI,QAAAyI,EAAA,IAAAzI,QAAA0I,EAAA,IAAA1I,QAAA2I,EAAA,IAAA3I,QAAA4I,EAAA,IAAA5I,QAAA6I,EAAA,IAAA7I,QAKa8I,EAAa,WA2CxB,O,EARA,SAAAA,EAAYvI,EAAKE,EAAKC,GAAS,IAAAwC,EAAA,M,4FAAAvC,CAAA,KAAAmI,GA5B/BlI,EAAA,KAAAV,OAAI,GAOJU,EAAA,KAAAR,OAAI,GAOJQ,EAAA,KAAAP,EAAW3B,UAGXkC,EAAA,KAAAyH,EAAgB,WAChBzH,EAAA,KAAA0H,EAAoB,WACpB1H,EAAA,KAAA2H,EAAmB,iBACnB3H,EAAA,KAAA4H,EAAkB,SA4BlB5H,EAAA,KAAA6H,GAA0B,SAACzE,GAEzBA,EAAM+E,kBACN/E,EAAMgF,gBACR,IAOApI,EAAA,KAAA8H,GAAiB,SAAC1E,GAChBjD,EAAK0H,EAALvF,GAA4B3F,KAA5B2F,EAA6Bc,GAE7B,IAAMiF,EAAMlI,EAAKV,EAAL6C,GAAclC,eAAeD,EAAKsH,EAALnF,IACrC+F,IAAwD,IAAjDA,EAAInF,UAAUoF,QAAQnI,EAAKyH,EAALtF,MAC/B+F,EAAInF,WAAa,IAAM/C,EAAKyH,EAALtF,GAE3B,IAOAtC,EAAA,KAAA+H,GAAkB,SAAC3E,GACjBjD,EAAK0H,EAALvF,GAA4B3F,KAA5B2F,EAA6Bc,GAE7B,IAAMiF,EAAMlI,EAAKV,EAAL6C,GAAclC,eAAeD,EAAKsH,EAALnF,IACrC+F,IAAwD,IAAjDA,EAAInF,UAAUoF,QAAQnI,EAAKyH,EAALtF,MAC/B+F,EAAInF,UAAYmF,EAAInF,UAAUqF,QAAQ,IAAMpI,EAAKyH,EAALtF,GAAsB,IAEtE,IAOAtC,EAAA,KAAAgI,GAAU,SAAC5E,GACTjD,EAAK0H,EAALvF,GAA4B3F,KAA5B2F,EAA6Bc,GAE7BjD,EAAKb,EAALgD,GAAUkG,UAAUpF,EAAMqF,aAAaC,MACzC,IAOA1I,EAAA,KAAAiI,GAAe,SAAC7E,GACVA,EAAMC,QAAUD,EAAMC,OAAOqF,OAC/BvI,EAAKb,EAALgD,GAAUkG,UAAUpF,EAAMC,OAAOqF,MAErC,IAzEEzI,EAAKX,EAAL/D,KAAYoE,GACZM,EAAKT,EAALjE,KAAYsE,QACW,IAAZC,GACTG,EAAKR,EAALlE,KAAgBuE,EAEpB,G,EAEA,EAAA7D,IAAA,OAAAc,MAGA,WACExB,KAAKoN,aAAY,EACnB,GAAC,CAAA1M,IAAA,cAAAc,MAoED,SAAY6L,GACV,IAAMP,EAAMlI,EAAKV,EAALlE,MAAc6E,eAAeD,EAAKsH,EAALlM,OACzC,GAAK8M,EAAL,CAGA,IAAMQ,EAAW1I,EAAKV,EAALlE,MAAc6E,eAAe,cAAgBD,EAAKX,EAALjE,OAE9D,GAAIqN,EAAM,CAIR,GAFAP,EAAInF,UAAY/C,EAAKuH,EAALnM,MAAyB,IAAM4E,EAAKwH,EAALpM,MAEzB,KAAlB8M,EAAIS,UAAkB,CACxB,IAAMC,EAAIjL,SAASM,cAAc,KACjC2K,EAAE7K,YAAYJ,SAASkB,eAAe,gCAEtC,IAAMgK,EAAQlL,SAASM,cAAc,SACrC4K,EAAMC,SAAW9I,EAAK8H,EAAL1M,MACjByN,EAAM3E,KAAO,OACb2E,EAAME,UAAW,EACjBF,EAAM3K,GAAK,aACX2K,EAAMrG,MAAMQ,QAAU,OACtB,IAAMgC,EAAQrH,SAASM,cAAc,SACrC+G,EAAMgE,QAAU,aAChB,IAAMC,EAAOtL,SAASM,cAAc,KACpCgL,EAAKlL,YAAYJ,SAASkB,eAAe,eACzCoK,EAAK/K,GAAK,kBACV8G,EAAMjH,YAAYkL,GAClBL,EAAE7K,YAAY8K,GACdD,EAAE7K,YAAYiH,GAEdkD,EAAInK,YAAY6K,EAClB,CAEAV,EAAIgB,aAAa,QAAS,mBAEtBR,IACFA,EAASS,oBAAoB,WAAYnJ,EAAK0H,EAALtM,OACzCsN,EAASS,oBAAoB,YAAanJ,EAAK0H,EAALtM,OAC1CsN,EAASS,oBAAoB,OAAQnJ,EAAK6H,EAALzM,QAGvC8M,EAAI7J,iBAAiB,WAAY2B,EAAK2H,EAALvM,OACjC8M,EAAI7J,iBAAiB,YAAa2B,EAAK4H,EAALxM,OAClC8M,EAAI7J,iBAAiB,OAAQ2B,EAAK6H,EAALzM,MAC/B,MAEE8M,EAAInF,UAAY/C,EAAKuH,EAALnM,MAEhB8M,EAAIS,UAAY,GAEhBT,EAAIgB,aAAa,QAAS,gBAE1BhB,EAAIiB,oBAAoB,WAAYnJ,EAAK2H,EAALvM,OACpC8M,EAAIiB,oBAAoB,YAAanJ,EAAK4H,EAALxM,OACrC8M,EAAIiB,oBAAoB,OAAQnJ,EAAK6H,EAALzM,OAE5BsN,IACFA,EAASrK,iBAAiB,WAAY2B,EAAK0H,EAALtM,OACtCsN,EAASrK,iBAAiB,YAAa2B,EAAK0H,EAALtM,OACvCsN,EAASrK,iBAAiB,OAAQ2B,EAAK6H,EAALzM,OAvDtC,CA0DF,M,6EAAC,CAlLuB,GCSnB,SAASgO,EAAS1J,EAAKwF,EAASvF,GAErC,IAAM0J,EAAa,CACjBC,gBAAiB,CAAC,IAAK,CAAC,CAAC1H,MAAO,cAAgBlC,KAChDD,MAAO,CACL3C,OAAQ,CAAC,EACTC,WAAY,CAAC,EACbC,YAAa,CAAC,EACdC,KAAM,CACJiI,QAAS,CAAC,iBAIO,IAAZvF,IACT0J,EAAWE,aAAe5J,GAG5B,IAAM6J,EAAS,IAAIC,EAAAA,IACnBD,EAAOE,KAAKL,GAGZ,IAAMM,EAAW3N,OAAOyJ,KAAK4D,EAAW5J,OAClCmK,EAAUD,EAASxB,QAAQ,gBAChB,IAAbyB,GACFD,EAASE,OAAOD,EAAU,EAAG,EAAG,sBAElCD,EAASlD,KAAK,SACdkD,EAASlD,KAAK,qBACdkD,EAASlD,KAAK,cACdkD,EAASlD,KAAK,QACd,IAAMqD,EAAY,IAAIvK,EAAIiK,EAAQG,EAAUjK,EAAKC,GACjDmK,EAAUJ,OACVI,EAAUC,aAAY,GAGtB,IASIC,EACAC,EACAC,EACAC,EAZEC,EAAe,SAAUnH,GACzBA,EAAMoH,SAA6B,KAAlBpH,EAAMqH,UAEzBC,QAAQC,IAAI,2CACZhB,EAAOiB,YAEX,EAOAjB,EAAOnL,iBAAiB,aAAa,WAEnC2L,EAAY,EACZC,EAAqB,EACrBC,EAAqB,EACrBC,GAAgB,EAEhBO,OAAOrM,iBAAiB,UAAW+L,GAEnCN,EAAUa,iBACZ,IACAnB,EAAOnL,iBAAiB,gBAAgB,SAAU4E,GAChD,IAAM1C,EAAUqK,KAAKC,KAAoB,IAAf5H,EAAM6H,OAAe7H,EAAM8H,OAErDjB,EAAUkB,YAAYzK,EACxB,IACAiJ,EAAOnL,iBAAiB,QAAQ,WAE9ByL,EAAUkB,YAAY,IACxB,IACAxB,EAAOnL,iBAAiB,YAAY,aAChC2L,CACJ,IACAR,EAAOnL,iBAAiB,aAAa,WACnC,GAAI8L,EAAe,CACjBA,GAAgB,EAEhBL,EAAUC,aAAY,GAEtB,IAAIkB,EAAe,aACfzB,EAAO0B,YACTD,EAAe,SAEfnB,EAAUhJ,WAAW,UAAU,GAE5B0I,EAAO2B,kBACVrB,EAAUhJ,WAAW,eAAe,GAEtC0I,EAAOnI,QAAQ4J,GACfnB,EAAU7I,aAAagK,GAAc,GAErC,IAKIG,EAHEC,EAFK7B,EAAO8B,sBACJC,qBACYC,oBAEtBC,GAAiB,EAErB,QAAuB,IAAZvG,QACmB,IAArBA,EAAQkG,SAA0B,CACzCK,GAAiB,EAEjB,IAAM9G,EAAU,CAAC,EACjBA,GAFAyG,EAAWlG,EAAQkG,UAEF1K,MAAQ,CACvBgL,GAAI,CAAC,IAAI1O,EAAAA,YAAYoO,EAASO,OAAQP,EAASQ,QAC/ClL,KAAM0K,EAAS1K,MAEjB2K,EAAeQ,sBAAsBlH,EACvC,CAEAmF,EAAUgC,cACRT,EAAeU,8BAGbN,IACFJ,EAAenK,qBAAqBkK,EAAS1K,MAC7CoJ,EAAU3I,kBAAkB+D,EAAQkG,SAAS1K,MAEjD,CACF,IACA8I,EAAOnL,iBAAiB,SAAS,SAAU4E,GACzCsH,QAAQyB,MAAM/I,EAAM+I,SAClB/B,CACJ,IACAT,EAAOnL,iBAAiB,SAAS,aAC7B6L,CACJ,IACAV,EAAOnL,iBAAiB,WAAW,WAEjC,GAAI4L,EAAoB,CACtB,IAAIgC,EAAU,oBACVhC,EAAqB,IACvBgC,EAAUhC,EAAqB,sBAEjCgC,GAAW,gCACXC,MAAMD,EACR,CAE2B,IAAvB/B,GACFK,QAAQ4B,KAAK,0BAGfzB,OAAOvB,oBAAoB,UAAWiB,EACxC,IAGA,IAAMgC,EAAgB,IAAIrE,EAAcyB,EAAQ9J,EAAKC,GACrDyM,EAAc1C,OAEdF,EAAOnL,iBAAiB,aAAa,WAEnC+N,EAAc5D,aAAY,EAC5B,IACAgB,EAAOnL,iBAAiB,WAAW,WAG5B2L,GACoB,IAAvBE,GACAkC,EAAc5D,aAAY,EAE9B,IAGAgB,EAAOnL,iBAAiB,WAAW,SAAU4E,GAC3CuG,EAAO6C,iBAAiBpJ,EAC1B,IAEAyH,OAAOrM,iBAAiB,SAAUmL,EAAO8C,UAGzC9C,EAAOnL,iBAAiB,YAAY,WAElC,IAEMgN,EAFK7B,EAAO8B,sBACJC,qBACYC,oBAC1B1B,EAAUgC,cACRT,EAAeU,8BAGjBjC,EAAU3I,kBAAkB,SAC9B,SAGuB,IAAZ+D,OACkB,IAAhBA,EAAQqH,IACjB/C,EAAOgD,YAAYtH,EAAQqH,UACM,IAAjBrH,EAAQuH,MACxBlC,QAAQC,IAAI,OAAQtF,EAAQuH,MAC5BjD,EAAOkD,SAASxH,EAAQuH,OAExBL,EAAc5D,aAAY,GAG5B4D,EAAc5D,aAAY,EAE9B,C,4vDCzKO,IAAMmE,GAAY,SAAAC,GACvB,SAAAD,IACE,O,4FADY/M,CAAA,KAAA+M,G,qYACZE,CAAA,KAAAF,EAEF,CAAC,O,qRAAAG,CAAAH,EAAAC,G,EAAAD,G,EAAA,EAAA7Q,IAAA,oBAAAc,MAED,WACE,IAAMmQ,EAAQ,UAGRC,EAAYrP,SAASM,cAAc,OACzC+O,EAAU9O,GAAK,OAAS6O,EACxBC,EAAUjK,UAAY,MAGtB,IAAMhD,EAAUpC,SAASM,cAAc,OACvC8B,EAAQ7B,GAAK,WAAa6O,EAC1BhN,EAAQgD,UAAY,UAGpB,IAAMkK,EAAatP,SAASM,cAAc,OAC1CgP,EAAW/O,GAAK,cAAgB6O,EAChCE,EAAWlK,UAAY,aACvB,IAAMmK,EAAUvP,SAASM,cAAc,OASvC,GARAiP,EAAQhP,GAAK,UACb+O,EAAWlP,YAAYmP,GAGvBF,EAAUjP,YAAYgC,GACtBiN,EAAUjP,YAAYkP,GAGlB7R,KAAK+R,aAAa,eACgB,SAApC/R,KAAKgS,aAAa,cAA0B,CAC5C,IAAMC,EAAU1P,SAASM,cAAc,KACvCoP,EAAQC,KAAO,kCACfD,EAAQjP,MAAQ,gBAChBiP,EAAQtP,YAAYJ,SAASkB,eAAe,QAE5C,IAAM0O,EAAO5P,SAASM,cAAc,KACpCsP,EAAKxP,YAAYJ,SAASkB,eAAe,gBACzC0O,EAAKxP,YAAYsP,GACjBE,EAAKxP,YAAYJ,SAASkB,eACxB,KAAM2O,EAAAA,EAAAA,iBAAkB,MAE1B,IAAMC,EAAS9P,SAASM,cAAc,OACtCwP,EAAOvP,GAAK,UAAY6O,EACxBU,EAAO1K,UAAY,SACnB0K,EAAO1P,YAAYwP,GAEnBP,EAAUjP,YAAY0P,EACxB,CAGA,IAAMC,EAAStS,KAAKuS,aAAa,CAACC,KAAM,SAElCpL,EAAQ7E,SAASM,cAAc,QACrCuE,EAAM0G,aAAa,MAAO,cAC1B1G,EAAM0G,aAAa,OAAQ,YAC3B1G,EAAM0G,aAAa,OAAQ,aAE3BwE,EAAO3P,YAAYyE,GACnBkL,EAAO3P,YAAYiP,GAGnB,IAAM9H,EAAU,CAAC,EACb9J,KAAK+R,aAAa,OACpBjI,EAAQqH,IAAMnR,KAAKgS,aAAa,OACvBhS,KAAK+R,aAAa,UAI3BjI,EAAQuH,KAAOrR,KAAKgS,aAAa,QAAQS,MAAM,KAAKlK,KAHnC,SAAUmK,GACzB,OAAOA,EAAKC,MACd,KAGE3S,KAAK+R,aAAa,iBACpB/R,KAAK+R,aAAa,mBAClB/R,KAAK+R,aAAa,mBAClBjI,EAAQkG,SAAW,CACjB1K,KAAMtF,KAAKgS,aAAa,gBACxBzB,OAAQvQ,KAAKgS,aAAa,kBAC1BxB,MAAOxQ,KAAKgS,aAAa,mBAK7BhE,EAAS2D,EAAO7H,EAASwI,EAC3B,M,6EAAC,CAtFsB,CAsFtBM,EAtF+BC,c,OA2FlCC,eAAehT,OAAO,aAAcyR,I","sources":["webpack://dwv-simplistic/webpack/universalModuleDefinition","webpack://dwv-simplistic/external umd {\"root\":\"dwv\",\"commonjs\":\"dwv\",\"commonjs2\":\"dwv\",\"amd\":\"dwv\"}","webpack://dwv-simplistic/webpack/bootstrap","webpack://dwv-simplistic/webpack/runtime/define property getters","webpack://dwv-simplistic/webpack/runtime/hasOwnProperty shorthand","webpack://dwv-simplistic/webpack/runtime/make namespace object","webpack://dwv-simplistic/./src/appgui.js","webpack://dwv-simplistic/./src/gui/dropboxLoader.js","webpack://dwv-simplistic/./src/applauncher.js","webpack://dwv-simplistic/./src/component.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"dwv\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"dwv\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dwvsimplistic\"] = factory(require(\"dwv\"));\n\telse\n\t\troot[\"dwvsimplistic\"] = factory(root[\"dwv\"]);\n})(this, (__WEBPACK_EXTERNAL_MODULE__440__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__440__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {getTagFromKey} from 'dwv';\n\n// doc imports\n/* eslint-disable no-unused-vars */\nimport {App} from 'dwv';\n/* eslint-enable no-unused-vars */\n\n// icons from https://fonts.google.com/icons\n// Fill: 0 Weight: 700 Grade: 0 Optical Size: 20\n/* eslint-disable @stylistic/js/max-len */\nconst _paths = {\n  // menu\n  Scroll: 'M110-215v-118h740v118H110Zm0-206v-118h740v118H110Zm0-206v-118h740v118H110Z',\n  // search\n  ZoomAndPan: 'M763-106 517-352q-29 18-64.292 28.5T376.035-313Q267-313 190-390t-77-186q0-109 77-186t186-77q109 0 186 77t77 186.035q0 42.381-10.5 76.673T600-437l247 248-84 83ZM376-431q61 0 103-42t42-103q0-61-42-103t-103-42q-61 0-103 42t-42 103q0 61 42 103t103 42Z',\n  // contrast\n  WindowLevel: 'M480.192-62Q394-62 318-94.5q-76-32.5-133.5-90t-90-133.542Q62-394.083 62-480.542 62-567 94.5-642.5t90-133q57.5-57.5 133.542-90 76.041-32.5 162.5-32.5Q567-898 642.5-865.5t133 90q57.5 57.5 90 133.308 32.5 75.807 32.5 162Q898-394 865.5-318q-32.5 76-90 133.5t-133.308 90q-75.807 32.5-162 32.5ZM528-184q109-18 180.5-99.222T780-480q0-112.818-71.5-194.909T528-775v591Z',\n  // straighten\n  Draw: 'M183-215q-49.7 0-83.85-34.15Q65-283.3 65-333v-294q0-49.7 34.15-83.85Q133.3-745 183-745h594q49.7 0 83.85 34.15Q895-676.7 895-627v294q0 49.7-34.15 83.85Q826.7-215 777-215H183Zm0-118h594v-294H672v147h-72v-147h-84v147h-72v-147h-84v147h-72v-147H183v294Zm105-147h72-72Zm156 0h72-72Zm156 0h72-72Zm-120 0Z',\n  // refresh\n  Reset: 'M476-158q-133 0-227.5-94.5T154-480q0-133 94.5-227.5T476-802q74 0 136 30t106 82v-112h88v289H516v-87h125q-29-38-71.5-61T476-684q-85 0-144.5 59.5T272-480q0 85 59.5 144.5T476-276q78 0 134.5-52.5T677-456h121q-10 126-102 212t-220 86Z',\n  // cameraswitch\n  ToggleOrientation: 'M327-273q-35.888 0-61.444-25.556Q240-324.112 240-360v-209q0-36.3 25.15-62.15T327-657h33l48-48h144l48 48h33q36.7 0 61.85 25.85T720-569v209q0 35.888-25.556 61.444Q668.888-273 633-273H327Zm0-87h306v-209H327v209Zm153.425-40Q507-400 525.5-419.133q18.5-19.132 18.5-46Q544-492 525.075-510.5q-18.925-18.5-45.5-18.5T434.5-510.075q-18.5 18.925-18.5 45.5T434.925-419q18.925 19 45.5 19ZM336-937q35.783-11.9 73.033-17.45Q446.283-960 485-960q91 0 173.5 33.5T805-835.275q64 57.725 104.544 136.5Q950.089-620 960-528H857q-8-61-34.5-115.5t-67-97q-40.5-42.5-94-71T547-851l46 47-60 62-197-195ZM624-23q-35.783 11.9-73.033 17.45Q513.717 0 475 0q-91.92 0-174.46-33.5t-146.04-91Q91-182 49.956-261 8.91-340 0-432h103q7 61 33.5 115.5t67.5 97q41 42.5 94.5 71T413-109l-46-47 60-62L624-23ZM482-466Z',\n  // open in full\n  Fullscreen: 'M110-110v-334h118v132l420-420H516v-118h334v334H732v-132L312-228h132v118H110Z',\n  // tags\n  Tags: 'M406-405h177v-92H406v92Zm0-132h354v-92H406v92Zm0-132h354v-92H406v92Zm-51 440q-53 0-89.5-36.5T229-355v-456q0-53 36.5-89.5T355-937h456q53 0 89.5 36.5T937-811v456q0 53-36.5 89.5T811-229H355Zm0-126h456v-456H355v456ZM149-23q-53 0-89.5-36.5T23-149v-582h126v582h582v126H149Zm206-788v456-456Z'\n};\n/* eslint-enable @stylistic/js/max-len */\n\n/**\n * Get a tool html button.\n *\n * @param {string} toolName The tool name.\n * @param {Gui} appGui The associated GUi.\n * @returns {HTMLButtonElement} An HTML button element.\n */\nfunction getToolButton(toolName, appGui) {\n  const xmlns = 'http://www.w3.org/2000/svg';\n  const path = document.createElementNS(xmlns, 'path');\n  path.setAttributeNS(null, 'd', _paths[toolName]);\n  const svg = document.createElementNS(xmlns, 'svg');\n  svg.setAttributeNS(null, 'height', 20);\n  svg.setAttributeNS(null, 'width', 20);\n  svg.setAttributeNS(null, 'viewBox', '0 -960 960 960');\n  svg.appendChild(path);\n  const button = document.createElement('button');\n  button.id = appGui.getToolId(toolName);\n  button.title = toolName;\n  button.appendChild(svg);\n  // onclick callback\n  if (toolName === 'Reset') {\n    button.addEventListener('click', function () {\n      appGui.onDisplayReset();\n    });\n  } else if (toolName === 'ToggleOrientation') {\n    button.addEventListener('click', function () {\n      appGui.toggleOrientation();\n    });\n  } else if (toolName === 'Fullscreen') {\n    button.addEventListener('click', function () {\n      appGui.toggleFullScreen();\n    });\n  } else if (toolName === 'Tags') {\n    button.addEventListener('click', function () {\n      appGui.openTagsModal();\n    });\n  } else {\n    button.addEventListener('click', function () {\n      appGui.onChangeTool(toolName);\n    });\n  }\n  return button;\n}\n\n/**\n * Get a tool html select.\n *\n * @param {string} toolName The tool name.\n * @param {Gui} appGui The associated GUi.\n * @returns {HTMLSelectElement} An HTML select element.\n */\nfunction getSelect(toolName, appGui) {\n  const option = document.createElement('option');\n  option.value = '';\n  option.appendChild(document.createTextNode('Preset...'));\n  const select = document.createElement('select');\n  select.id = appGui.getToolId(toolName);\n  select.title = 'Window level presets';\n  select.appendChild(option);\n  select.addEventListener('change', function () {\n    appGui.onChangePreset(this.value);\n  });\n  return select;\n}\n\n/**\n * GUI class.\n */\nexport class Gui {\n\n  /**\n   * View this.#orientation.\n   *\n   * @type {string}\n   */\n  #orientation;\n\n  /**\n   * Layer group div height before full screen.\n   *\n   * @type {string}\n   */\n  #lgDivHeight;\n\n  /**\n   * The associated app.\n   *\n   * @type {App}\n   */\n  #app;\n\n  /**\n   * The list of tools.\n   *\n   * @type {string[]}\n   */\n  #tools;\n\n  /**\n   * The GUI UID.\n   *\n   * @type {string}\n   */\n  #uid;\n\n  /**\n   * The root document.\n   *\n   * @type {Document}\n   */\n  #rootDoc = document;\n\n  /**\n   * @param {App} app The associated app.\n   * @param {string[]} tools The list of tools.\n   * @param {string} uid The GUI unique id.\n   * @param {Document} [rootDoc] Optional root document,\n   *   defaults to `window.document`.\n   */\n  constructor(app, tools, uid, rootDoc) {\n    this.#app = app;\n    this.#tools = tools;\n    this.#uid = uid;\n    if (typeof rootDoc !== 'undefined') {\n      this.#rootDoc = rootDoc;\n    }\n  };\n\n  /**\n   * Initialise the GUI: fill the toolbar.\n   */\n  init() {\n    const toolbar = this.#rootDoc.getElementById(this.getToolbarDivId());\n    for (let i = 0; i < this.#tools.length; ++i) {\n      if (this.#tools[i] === 'WindowLevelPresets') {\n        toolbar.appendChild(getSelect(this.#tools[i], this));\n      } else {\n        toolbar.appendChild(getToolButton(this.#tools[i], this));\n      }\n    }\n  };\n\n  /**\n   * Show the progress bar: adds a progress to the\n   *   layerGroup div.\n   */\n  showProgressBar() {\n    const progress = document.createElement('progress');\n    progress.id = 'progress-' + this.#uid;\n    progress.max = '100';\n    progress.value = '0';\n\n    const lg = this.#rootDoc.getElementById(this.getToolbarDivId());\n    lg.appendChild(progress);\n  };\n\n  /**\n   * Set the progress: updates the progress bar,\n   *   hides it if percent is 100.\n   *\n   * @param {number} percent The progess percent.\n   */\n  setProgress(percent) {\n    const progress = this.#rootDoc.getElementById('progress-' + this.#uid);\n    if (progress) {\n      if (percent === 100) {\n        // remove\n        progress.remove();\n      } else {\n        // update value\n        progress.value = percent;\n      }\n    }\n  };\n\n  /**\n   * Get the dwv div id.\n   *\n   * @returns {string} The id.\n   */\n  getDwvDivId() {\n    return 'dwv-' + this.#uid;\n  };\n\n  /**\n   * Get the layer group div id.\n   *\n   * @returns {string} The id.\n   */\n  getLayerGroupDivId() {\n    return 'layerGroup-' + this.#uid;\n  };\n\n  /**\n   * Get the toolbar div id.\n   *\n   * @returns {string} The id.\n   */\n  getToolbarDivId() {\n    return 'toolbar-' + this.#uid;\n  };\n\n  /**\n   * Get a tool id from its name.\n   *\n   * @param {string} toolName Tool name.\n   * @returns {string} The id.\n   */\n  getToolId(toolName) {\n    return toolName.toLowerCase() + '-' + this.#uid;\n  };\n\n  /**\n   * Enable or not a tool.\n   *\n   * @param {string} name The tool name.\n   * @param {boolean} flag True to enable.\n   */\n  enableTool(name, flag) {\n    const toolId = this.getToolId(name);\n    this.#rootDoc.getElementById(toolId).disabled = !flag;\n  };\n\n  /**\n   * Enable or not all tools.\n   *\n   * @param {boolean} flag True to enable.\n   */\n  enableTools(flag) {\n    for (let i = 0; i < this.#tools.length; ++i) {\n      this.enableTool(this.#tools[i], flag);\n    }\n  };\n\n  /**\n   * Activate or not a tool.\n   *\n   * @param {string} name The tool name.\n   * @param {boolean} flag True to activate.\n   */\n  activateTool(name, flag) {\n    const toolId = this.getToolId(name);\n    if (flag) {\n      this.#rootDoc.getElementById(toolId).classList.add('active');\n    } else {\n      this.#rootDoc.getElementById(toolId).classList.remove('active');\n    }\n  };\n\n  /**\n   * Activate or not all tool.\n   *\n   * @param {boolean} flag True to activate.\n   */\n  activateTools(flag) {\n    for (let i = 0; i < this.#tools.length; ++i) {\n      this.activateTool(this.#tools[i], flag);\n    }\n  };\n\n  /**\n   * Handle preset change.\n   *\n   * @param {string} name The name of the new preset.\n   */\n  onChangePreset(name) {\n    // update viewer\n    this.#app.setWindowLevelPreset(name);\n    // set selected\n    this.setSelectedPreset(name);\n  };\n\n  /**\n   * Handle tool change.\n   *\n   * @param {string} name The name of the new tool.\n   */\n  onChangeTool(name) {\n    this.activateTools(false);\n    this.activateTool(name, true);\n    this.#app.setTool(name);\n    if (name === 'Draw') {\n      this.#app.setToolFeatures({shapeName: 'Ruler'});\n    }\n  };\n\n  /**\n   * Handle display reset.\n   */\n  onDisplayReset() {\n    this.#app.resetDisplay();\n    // reset preset dropdown\n    const presetsId = this.getToolId('WindowLevelPresets');\n    const domPresets = this.#rootDoc.getElementById(presetsId);\n    domPresets.selectedIndex = 0;\n  };\n\n  /**\n   * Toggle the viewer this.#orientation.\n   */\n  toggleOrientation() {\n    if (typeof this.#orientation !== 'undefined') {\n      if (this.#orientation === 'axial') {\n        this.#orientation = 'coronal';\n      } else if (this.#orientation === 'coronal') {\n        this.#orientation = 'sagittal';\n      } else if (this.#orientation === 'sagittal') {\n        this.#orientation = 'axial';\n      }\n    } else {\n      // default is most probably axial\n      this.#orientation = 'coronal';\n    }\n    // update data view config\n    const config = {\n      '*': [\n        {\n          divId: this.getLayerGroupDivId(),\n          orientation: this.#orientation\n        }\n      ]\n    };\n    this.#app.setDataViewConfigs(config);\n    // render data\n    const dataIds = this.#app.getDataIds();\n    for (let i = 0; i < dataIds.length; ++i) {\n      this.#app.render(dataIds[i]);\n    }\n  };\n\n  /**\n   * Toogle full screen on and off.\n   */\n  toggleFullScreen() {\n    const lgDivId = this.getLayerGroupDivId();\n    const lgElement = this.#rootDoc.getElementById(lgDivId);\n\n    // the app listens on window resize (see applaucher\n    // `window.addEventListener('resize', dwvApp.onResize);`)\n    // -> no need to manually call app.fitToContainer\n\n    if (!document.fullscreenElement) {\n      const fsDivId = this.getDwvDivId();\n      const fsElement = this.#rootDoc.getElementById(fsDivId);\n      fsElement.requestFullscreen().then(() => {\n        // if the layer group height was 0, the app set it to a fixed size.\n        // change it to 100% to trigger a resize and recalculate the\n        // fit scale to occupy the full screen\n        this.#lgDivHeight = lgElement.style.height;\n        lgElement.style.height = '100%';\n      });\n    } else if (document.exitFullscreen) {\n      document.exitFullscreen();\n      // restore previous height\n      lgElement.style.height = this.#lgDivHeight;\n    }\n  };\n\n  /**\n   * Open a DICOM tags modal.\n   */\n  openTagsModal() {\n    // modal\n    const modalDiv = document.createElement('div');\n    modalDiv.className = 'modal';\n    modalDiv.id = 'modal-' + this.#uid;\n    modalDiv.style.display = 'block';\n    // close on outside click\n    this.#rootDoc.addEventListener('click', function (event) {\n      if (event.target === modalDiv) {\n        modalDiv.style.display = 'none';\n      }\n    });\n\n    const modalContentDiv = document.createElement('div');\n    modalContentDiv.className = 'modal-content';\n    modalContentDiv.id = 'modal-content-' + this.#uid;\n    modalDiv.appendChild(modalContentDiv);\n\n    const modalTitle = document.createElement('h2');\n    modalTitle.appendChild(document.createTextNode('DICOM Tags'));\n    modalContentDiv.appendChild(modalTitle);\n\n    // div with enabled scroll\n    const modalScrollDiv = document.createElement('div');\n    modalScrollDiv.className = 'modal-content-scroll';\n\n    const metaData = this.#app.getMetaData('0');\n\n    // InstanceNumber\n    const instanceElement = metaData['00200013'];\n    let instanceNumbers;\n    if (typeof instanceElement !== 'undefined') {\n      // set slider with instance numbers ('00200013')\n      let instanceNumberValue = instanceElement.value;\n      if (typeof instanceNumberValue === 'string') {\n        instanceNumberValue = [instanceNumberValue];\n      }\n      // convert string to numbers\n      instanceNumbers = instanceNumberValue.map(Number);\n      // sort\n      instanceNumbers.sort(function (a, b) {\n        return a - b;\n      });\n    }\n\n    let instanceNumber = instanceNumbers[0];\n\n    const slider = document.createElement('input');\n    slider.type = 'range';\n    slider.id = 'instancenumber-slider-' + this.#uid;\n    slider.min = 0;\n    slider.max = instanceNumbers.length - 1;\n    slider.value = 0;\n    slider.title = 'Instance Number';\n    const sliderLabel = document.createElement('label');\n    sliderLabel.id = 'instancenumber-slider-label-' + this.#uid;\n    sliderLabel.for = slider.id;\n    sliderLabel.appendChild(document.createTextNode(instanceNumber));\n    sliderLabel.title = slider.title;\n\n    const sliderLine = document.createElement('p');\n    sliderLine.appendChild(slider);\n    sliderLine.appendChild(sliderLabel);\n    modalContentDiv.appendChild(sliderLine);\n\n    slider.addEventListener('input', function (event) {\n      instanceNumber = instanceNumbers[event.target.value];\n      const metaArr = getMetaArray(metaData, instanceNumber);\n      const metaTab = arrayToHtmlTable(metaArr);\n      modalScrollDiv.replaceChildren(metaTab);\n      sliderLabel.replaceChildren(document.createTextNode(instanceNumber));\n    });\n\n    // get meta data html table\n    const metaArray = getMetaArray(metaData, instanceNumber);\n    const metaTable = arrayToHtmlTable(metaArray);\n    modalScrollDiv.appendChild(metaTable);\n    modalContentDiv.appendChild(modalScrollDiv);\n\n    // global container\n    const container = this.#rootDoc.getElementById(this.getDwvDivId());\n    container.appendChild(modalDiv);\n  };\n\n  /**\n   * Update preset dropdown.\n   *\n   * @param {string[]} presets The list of presets to use as options.\n   */\n  updatePresets(presets) {\n    const presetsId = this.getToolId('WindowLevelPresets');\n    const domPresets = this.#rootDoc.getElementById(presetsId);\n    // clear previous\n    while (domPresets.hasChildNodes()) {\n      domPresets.removeChild(domPresets.firstChild);\n    }\n    // add new\n    for (let i = 0; i < presets.length; ++i) {\n      const option = document.createElement('option');\n      option.value = presets[i];\n      const label = presets[i];\n      option.appendChild(document.createTextNode(label));\n      domPresets.appendChild(option);\n    }\n  };\n\n  /**\n   * Set the selected preset in the preset dropdown.\n   *\n   * @param {string} name The name of the preset to select.\n   */\n  setSelectedPreset(name) {\n    const presetsId = this.getToolId('WindowLevelPresets');\n    const domPresets = this.#rootDoc.getElementById(presetsId);\n    // find the index\n    let index = 0;\n    for (index in domPresets.options) {\n      if (domPresets.options[index].value === name) {\n        break;\n      }\n    }\n    // set selected\n    domPresets.selectedIndex = index;\n  };\n\n}; // class Gui\n\n/**\n * Get an HTML table from a string array.\n *\n * @param {string[]} arr The input array.\n * @returns {HTMLTableElement} The HTML table element.\n */\nfunction arrayToHtmlTable(arr) {\n  const table = document.createElement('table');\n  let row;\n  let cell;\n\n  // check input\n  if (typeof arr === 'undefined' ||\n    arr.length === 0) {\n    row = table.insertRow(-1);\n    cell = document.createElement('td');\n    cell.appendChild(document.createTextNode('Empty input array...'));\n    row.appendChild(cell);\n    return table;\n  }\n\n  // extract keys from first element\n  const item0 = arr[0];\n  const keys = Object.keys(item0);\n\n  // table body\n  for (let i = 0; i < arr.length; ++i) {\n    row = table.insertRow(-1);\n    for (let j = 0; j < keys.length; ++j) {\n      cell = document.createElement('td');\n      cell.appendChild(document.createTextNode(arr[i][keys[j]]));\n      row.appendChild(cell);\n    }\n  }\n  // table head\n  const thead = table.createTHead();\n  const th = thead.insertRow(-1);\n  for (let k = 0; k < keys.length; ++k) {\n    const hcell = document.createElement('th');\n    let key = keys[k];\n    key = key.charAt(0).toUpperCase() + key.slice(1);\n    hcell.appendChild(document.createTextNode(key));\n    th.appendChild(hcell);\n  }\n\n  return table;\n}\n\n/**\n * Get the meta data as an array.\n *\n * @param {any} meta The meta data.\n * @param {number} instanceNumber The instance number.\n * @returns {string[]} The meta data as a flat string array.\n */\nfunction getMetaArray(meta, instanceNumber) {\n  let reducer;\n  if (isDicomMeta(meta)) {\n    reducer = getDicomTagReducer(meta, instanceNumber, '');\n  } else {\n    reducer = getTagReducer(meta);\n  }\n  const keys = Object.keys(meta);\n  return keys.reduce(reducer, []);\n}\n\n/**\n * Check if a meta data is a dicom one.\n *\n * @param {any} meta The dicom meta data.\n * @returns {boolean} True if the meta data is a DICOM one.\n */\nfunction isDicomMeta(meta) {\n  // true if it has a Transfer Syntax\n  return typeof meta['00020010'] !== 'undefined';\n}\n\n/**\n * Get a simple data array reducer.\n *\n * @param {any} tagData Simple data with a 'value' property.\n * @returns {Function} The data recuder.\n */\nfunction getTagReducer(tagData) {\n  return function (accumulator, currentValue) {\n    accumulator.push({\n      name: currentValue,\n      value: tagData[currentValue].value\n    });\n    return accumulator;\n  };\n}\n\n/**\n * Get a DICOM data array reducer.\n *\n * @param {any} tagData DICOM data.\n * @param {number} instanceNumber The instance number.\n * @param {string} prefix The prefix.\n * @returns {Function} The data reducer.\n */\nfunction getDicomTagReducer(tagData, instanceNumber, prefix) {\n  return function (accumulator, currentValue) {\n    const tag = getTagFromKey(currentValue);\n    let key = tag.getNameFromDictionary();\n    if (typeof key === 'undefined') {\n      // add 'x' to help sorting\n      key = 'x' + tag.getKey();\n    }\n    const name = key;\n    const element = tagData[currentValue];\n    let value = element.value;\n    // possible 'merged' object\n    // (use slice method as test for array and typed array)\n    if (typeof value.slice === 'undefined' &&\n      typeof value[instanceNumber] !== 'undefined') {\n      value = value[instanceNumber];\n    }\n    // force instance number (otherwise takes value in non indexed array)\n    if (name === 'InstanceNumber') {\n      value = instanceNumber;\n    }\n    // recurse for sequence\n    if (element.vr === 'SQ') {\n      // sequence tag\n      accumulator.push({\n        name: (prefix ? prefix + ' ' : '') + name,\n        value: ''\n      });\n      // sequence value\n      for (let i = 0; i < value.length; ++i) {\n        const sqItems = value[i];\n        const keys = Object.keys(sqItems);\n        const res = keys.reduce(\n          getDicomTagReducer(\n            sqItems, instanceNumber, prefix + '[' + i + ']'), []\n        );\n        accumulator = accumulator.concat(res);\n      }\n    } else {\n      // shorten long 'o'ther data\n      if (element.vr[0] === 'O' && value.length > 10) {\n        value = value.slice(0, 10).toString() +\n          '... (len:' + value.length + ')';\n      }\n      accumulator.push({\n        name: (prefix ? prefix + ' ' : '') + name,\n        value: value.toString()\n      });\n    }\n    return accumulator;\n  };\n}\n","// doc imports\n/* eslint-disable no-unused-vars */\nimport {App} from 'dwv';\n/* eslint-enable no-unused-vars */\n\n/**\n * Dropbox loader.\n * Listens to drag events on the layer container and\n *   uses a drop box element as first display.\n */\nexport class DropboxLoader {\n\n  /**\n   * The associated app.\n   *\n   * @type {App}\n   */\n  #app;\n\n  /**\n   * The GUI UID.\n   *\n   * @type {string}\n   */\n  #uid;\n\n  /**\n   * The root document.\n   *\n   * @type {Document}\n   */\n  #rootDoc = document;\n\n  // drop box class name\n  #dropboxDivId = 'dropBox';\n  #dropboxClassName = 'dropBox';\n  #borderClassName = 'dropBoxBorder';\n  #hoverClassName = 'hover';\n\n  /**\n   * @param {App} app The associated application.\n   * @param {string} uid The GUI UID.\n   * @param {Document} [rootDoc] Optional root document,\n   *   defaults to `window.document`.\n   */\n  constructor(app, uid, rootDoc) {\n    this.#app = app;\n    this.#uid = uid;\n    if (typeof rootDoc !== 'undefined') {\n      this.#rootDoc = rootDoc;\n    }\n  }\n\n  /**\n   * Initialise the drop box.\n   */\n  init() {\n    this.showDropbox(true);\n  };\n\n  /**\n   * Basic handle drag event.\n   *\n   * @param {object} event The event to handle.\n   */\n  #defaultHandleDragEvent = (event) => {\n    // prevent default handling\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  /**\n   * Handle a drag over.\n   *\n   * @param {object} event The event to handle.\n   */\n  #onBoxDragOver = (event) => {\n    this.#defaultHandleDragEvent(event);\n    // update box border\n    const box = this.#rootDoc.getElementById(this.#dropboxDivId);\n    if (box && box.className.indexOf(this.#hoverClassName) === -1) {\n      box.className += ' ' + this.#hoverClassName;\n    }\n  };\n\n  /**\n   * Handle a drag leave.\n   *\n   * @param {object} event The event to handle.\n   */\n  #onBoxDragLeave = (event) => {\n    this.#defaultHandleDragEvent(event);\n    // update box border\n    const box = this.#rootDoc.getElementById(this.#dropboxDivId);\n    if (box && box.className.indexOf(this.#hoverClassName) !== -1) {\n      box.className = box.className.replace(' ' + this.#hoverClassName, '');\n    }\n  };\n\n  /**\n   * Handle a drop event.\n   *\n   * @param {object} event The event to handle.\n   */\n  #onDrop = (event) => {\n    this.#defaultHandleDragEvent(event);\n    // load files\n    this.#app.loadFiles(event.dataTransfer.files);\n  };\n\n  /**\n   * Handle a an input[type:file] change event.\n   *\n   * @param {object} event The event to handle.\n   */\n  #onInputFile = (event) => {\n    if (event.target && event.target.files) {\n      this.#app.loadFiles(event.target.files);\n    }\n  };\n\n  /**\n   * Show or hide the data load drop box.\n   *\n   * @param {boolean} show Flag to show or hide.\n   */\n  showDropbox(show) {\n    const box = this.#rootDoc.getElementById(this.#dropboxDivId);\n    if (!box) {\n      return;\n    }\n    const layerDiv = this.#rootDoc.getElementById('layerGroup-' + this.#uid);\n\n    if (show) {\n      // reset css class\n      box.className = this.#dropboxClassName + ' ' + this.#borderClassName;\n      // add content if empty\n      if (box.innerHTML === '') {\n        const p = document.createElement('p');\n        p.appendChild(document.createTextNode('Drag and drop data here or '));\n        // input file\n        const input = document.createElement('input');\n        input.onchange = this.#onInputFile;\n        input.type = 'file';\n        input.multiple = true;\n        input.id = 'input-file';\n        input.style.display = 'none';\n        const label = document.createElement('label');\n        label.htmlFor = 'input-file';\n        const link = document.createElement('a');\n        link.appendChild(document.createTextNode('click here'));\n        link.id = 'input-file-link';\n        label.appendChild(link);\n        p.appendChild(input);\n        p.appendChild(label);\n\n        box.appendChild(p);\n      }\n      // show box\n      box.setAttribute('style', 'display:initial');\n      // stop layer listening\n      if (layerDiv) {\n        layerDiv.removeEventListener('dragover', this.#defaultHandleDragEvent);\n        layerDiv.removeEventListener('dragleave', this.#defaultHandleDragEvent);\n        layerDiv.removeEventListener('drop', this.#onDrop);\n      }\n      // listen to box events\n      box.addEventListener('dragover', this.#onBoxDragOver);\n      box.addEventListener('dragleave', this.#onBoxDragLeave);\n      box.addEventListener('drop', this.#onDrop);\n    } else {\n      // remove border css class\n      box.className = this.#dropboxClassName;\n      // remove content\n      box.innerHTML = '';\n      // hide box\n      box.setAttribute('style', 'display:none');\n      // stop box listening\n      box.removeEventListener('dragover', this.#onBoxDragOver);\n      box.removeEventListener('dragleave', this.#onBoxDragLeave);\n      box.removeEventListener('drop', this.#onDrop);\n      // listen to layer events\n      if (layerDiv) {\n        layerDiv.addEventListener('dragover', this.#defaultHandleDragEvent);\n        layerDiv.addEventListener('dragleave', this.#defaultHandleDragEvent);\n        layerDiv.addEventListener('drop', this.#onDrop);\n      }\n    }\n  };\n}; // class DropboxLoader\n","import {\n  App,\n  WindowLevel\n} from 'dwv';\n\nimport {Gui} from './appgui';\nimport {DropboxLoader} from './gui/dropboxLoader';\n\n/**\n * Application launcher.\n *\n * @param {string} uid The app uid.\n * @param {object} options Start options:\n * - uri (string): an URI with search parameters,\n * - urls (string[]): list of urls to load,\n * - wlpreset (object): default window level preset.\n * @param {Document} [rootDoc] Optional root document,\n *   defaults to `window.document`.\n */\nexport function startApp(uid, options, rootDoc) {\n  // app options\n  const appOptions = {\n    dataViewConfigs: {'*': [{divId: 'layerGroup-' + uid}]},\n    tools: {\n      Scroll: {},\n      ZoomAndPan: {},\n      WindowLevel: {},\n      Draw: {\n        options: ['Ruler']\n      }\n    }\n  };\n  if (typeof rootDoc !== 'undefined') {\n    appOptions.rootDocument = rootDoc;\n  }\n  // main application\n  const dwvApp = new App();\n  dwvApp.init(appOptions);\n\n  // app gui\n  const guiTools = Object.keys(appOptions.tools);\n  const wlIndex = guiTools.indexOf('WindowLevel');\n  if (wlIndex !== -1) {\n    guiTools.splice(wlIndex + 1, 0, 'WindowLevelPresets');\n  }\n  guiTools.push('Reset');\n  guiTools.push('ToggleOrientation');\n  guiTools.push('Fullscreen');\n  guiTools.push('Tags');\n  const dwvAppGui = new Gui(dwvApp, guiTools, uid, rootDoc);\n  dwvAppGui.init();\n  dwvAppGui.enableTools(false);\n\n  // abort shortcut listener\n  const abortOnCrtlX = function (event) {\n    if (event.ctrlKey && event.keyCode === 88) {\n      // crtl-x\n      console.log('Abort load received from user (crtl-x).');\n      dwvApp.abortLoad();\n    }\n  };\n\n  // handle load events\n  let nLoadItem;\n  let nReceivedLoadError;\n  let nReceivedLoadAbort;\n  let isFirstRender;\n  dwvApp.addEventListener('loadstart', function (/*event*/) {\n    // reset counts\n    nLoadItem = 0;\n    nReceivedLoadError = 0;\n    nReceivedLoadAbort = 0;\n    isFirstRender = true;\n    // allow to cancel via crtl-x\n    window.addEventListener('keydown', abortOnCrtlX);\n    // show progress bar\n    dwvAppGui.showProgressBar();\n  });\n  dwvApp.addEventListener('loadprogress', function (event) {\n    const percent = Math.ceil(event.loaded * 100 / event.total);\n    // set progress (hides the bar is percent=100)\n    dwvAppGui.setProgress(percent);\n  });\n  dwvApp.addEventListener('load', function (/*event*/) {\n    // force hidding in case 100% progress was not sent\n    dwvAppGui.setProgress(100);\n  });\n  dwvApp.addEventListener('loaditem', function (/*event*/) {\n    ++nLoadItem;\n  });\n  dwvApp.addEventListener('renderend', function (/*event*/) {\n    if (isFirstRender) {\n      isFirstRender = false;\n      // enable tools\n      dwvAppGui.enableTools(true);\n      // set the selected tool\n      let selectedTool = 'ZoomAndPan';\n      if (dwvApp.canScroll()) {\n        selectedTool = 'Scroll';\n      } else {\n        dwvAppGui.enableTool('Scroll', false);\n      }\n      if (!dwvApp.canWindowLevel()) {\n        dwvAppGui.enableTool('WindowLevel', false);\n      }\n      dwvApp.setTool(selectedTool);\n      dwvAppGui.activateTool(selectedTool, true);\n      // update presets\n      const lg = dwvApp.getActiveLayerGroup();\n      const vl = lg.getActiveViewLayer();\n      const viewController = vl.getViewController();\n      // optional wl preset\n      let hasExtraPreset = false;\n      let wlpreset;\n      if (typeof options !== 'undefined' &&\n        typeof options.wlpreset !== 'undefined') {\n        hasExtraPreset = true;\n        wlpreset = options.wlpreset;\n        const presets = {};\n        presets[wlpreset.name] = {\n          wl: [new WindowLevel(wlpreset.center, wlpreset.width)],\n          name: wlpreset.name\n        };\n        viewController.addWindowLevelPresets(presets);\n      }\n      // update GUI\n      dwvAppGui.updatePresets(\n        viewController.getWindowLevelPresetsNames()\n      );\n      // select optional preset\n      if (hasExtraPreset) {\n        viewController.setWindowLevelPreset(wlpreset.name);\n        dwvAppGui.setSelectedPreset(options.wlpreset.name);\n      }\n    }\n  });\n  dwvApp.addEventListener('error', function (event) {\n    console.error(event.error);\n    ++nReceivedLoadError;\n  });\n  dwvApp.addEventListener('abort', function (/*event*/) {\n    ++nReceivedLoadAbort;\n  });\n  dwvApp.addEventListener('loadend', function (/*event*/) {\n    // show alert for errors\n    if (nReceivedLoadError) {\n      let message = 'A load error has ';\n      if (nReceivedLoadError > 1) {\n        message = nReceivedLoadError + ' load errors have ';\n      }\n      message += 'occured. See log for details.';\n      alert(message);\n    }\n    // console warn for aborts\n    if (nReceivedLoadAbort !== 0) {\n      console.warn('Data load was aborted.');\n    }\n    // stop listening for crtl-x\n    window.removeEventListener('keydown', abortOnCrtlX);\n  });\n\n  // setup drop box\n  const dropBoxLoader = new DropboxLoader(dwvApp, uid, rootDoc);\n  dropBoxLoader.init();\n  // show/hide drop box\n  dwvApp.addEventListener('loadstart', function (/*event*/) {\n    // hide drop box\n    dropBoxLoader.showDropbox(false);\n  });\n  dwvApp.addEventListener('loadend', function (/*event*/) {\n    // show the drop box if no item were received or\n    // if the load was aborted\n    if (!nLoadItem ||\n      nReceivedLoadAbort !== 0) {\n      dropBoxLoader.showDropbox(true);\n    }\n  });\n\n  // handle key events\n  dwvApp.addEventListener('keydown', function (event) {\n    dwvApp.defaultOnKeydown(event);\n  });\n  // handle window resize\n  window.addEventListener('resize', dwvApp.onResize);\n\n  // listen to 'wlchange'\n  dwvApp.addEventListener('wlchange', function (/*event*/) {\n    // update presets (in case new was added)\n    const lg = dwvApp.getActiveLayerGroup();\n    const vl = lg.getActiveViewLayer();\n    const viewController = vl.getViewController();\n    dwvAppGui.updatePresets(\n      viewController.getWindowLevelPresetsNames()\n    );\n    // suppose it is a manual change so switch preset to manual\n    dwvAppGui.setSelectedPreset('manual');\n  });\n\n  // load from options if defined\n  if (typeof options !== 'undefined') {\n    if (typeof options.uri !== 'undefined') {\n      dwvApp.loadFromUri(options.uri);\n    } else if (typeof options.urls !== 'undefined') {\n      console.log('urls', options.urls);\n      dwvApp.loadURLs(options.urls);\n    } else {\n      dropBoxLoader.showDropbox(true);\n    }\n  } else {\n    dropBoxLoader.showDropbox(true);\n  }\n};\n","import {getDwvVersion} from 'dwv';\nimport {startApp} from './applauncher';\n\n/**\n * DWV component: display DICOM data using DWV (DICOM Web Viewer).\n * Possible arguments are:\n * - uri: an input string URI to load the data from,\n * - urls: comma separated list of urls to load the data from,\n * - showLegend: (optional) show or not the legend (defaults to false),\n * - wlpresetname, wlpresetcenter and wlpresetwidth: (optional) used\n *   to start the viewer with a specific window level setting\n *   (only applied if all three values are present).\n *\n * A dropbox is shown if no uri nor urls are provided, it allows to\n * manually load dicom data from the local system.\n *\n * Ref: {@link https://github.com/ivmartel/dwv}.\n *\n * @example\n * <dwv-simple showLegend=\"true\"></dwv-simple>\n * @example\n * <dwv-simple\n *   uri=\"https://www.demo.com/index.html?input=file.dcm\"\n * ></dwv-simple>\n * @example\n * <dwv-simple\n *   urls=\"\n *     https://raw.githubusercontent.com/ivmartel/dwv/master/tests/data/bbmri-53323851.dcm,\n *     https://raw.githubusercontent.com/ivmartel/dwv/master/tests/data/bbmri-53323707.dcm\n *   \"\n * ></dwv-simple>\n * @example\n * <dwv-simple\n *   urls=\"\n *     https://raw.githubusercontent.com/ivmartel/dwv/master/tests/data/bbmri-53323851.dcm,\n *     https://raw.githubusercontent.com/ivmartel/dwv/master/tests/data/bbmri-53323707.dcm\n *   \"\n *   wlpresetname=\"preset0\"\n *   wlpresetcenter=\"0\"\n *   wlpresetwidth=\"2500\"\n * ></dwv-simple>\n */\nexport class DwvComponent extends HTMLElement {\n  constructor() {\n    // Always call super first in constructor\n    super();\n  }\n\n  connectedCallback() {\n    const appId = 'simple0';\n\n    // main container\n    const container = document.createElement('div');\n    container.id = 'dwv-' + appId;\n    container.className = 'dwv';\n\n    // toolbar\n    const toolbar = document.createElement('div');\n    toolbar.id = 'toolbar-' + appId;\n    toolbar.className = 'toolbar';\n\n    // layer group\n    const layerGroup = document.createElement('div');\n    layerGroup.id = 'layerGroup-' + appId;\n    layerGroup.className = 'layerGroup';\n    const dropBox = document.createElement('div');\n    dropBox.id = 'dropBox';\n    layerGroup.appendChild(dropBox);\n\n    // fill container\n    container.appendChild(toolbar);\n    container.appendChild(layerGroup);\n\n    // legend\n    if (this.hasAttribute('showLegend') &&\n      this.getAttribute('showLegend') === 'true') {\n      const dwvLink = document.createElement('a');\n      dwvLink.href = 'https://github.com/ivmartel/dwv';\n      dwvLink.title = 'dwv on github';\n      dwvLink.appendChild(document.createTextNode('dwv'));\n\n      const para = document.createElement('p');\n      para.appendChild(document.createTextNode('Powered by '));\n      para.appendChild(dwvLink);\n      para.appendChild(document.createTextNode(\n        ' ' + getDwvVersion() + '.'));\n\n      const legend = document.createElement('div');\n      legend.id = 'legend-' + appId;\n      legend.className = 'legend';\n      legend.appendChild(para);\n\n      container.appendChild(legend);\n    }\n\n    // shadow root\n    const shadow = this.attachShadow({mode: 'open'});\n    // style\n    const style = document.createElement('link');\n    style.setAttribute('rel', 'stylesheet');\n    style.setAttribute('type', 'text/css');\n    style.setAttribute('href', 'style.css');\n    // fill shadow root\n    shadow.appendChild(style);\n    shadow.appendChild(container);\n\n    // create options from attributes\n    const options = {};\n    if (this.hasAttribute('uri')) {\n      options.uri = this.getAttribute('uri');\n    } else if (this.hasAttribute('urls')) {\n      const trimItem = function (item) {\n        return item.trim();\n      };\n      options.urls = this.getAttribute('urls').split(',').map(trimItem);\n    }\n    if (this.hasAttribute('wlpresetname') &&\n      this.hasAttribute('wlpresetcenter') &&\n      this.hasAttribute('wlpresetwidth')) {\n      options.wlpreset = {\n        name: this.getAttribute('wlpresetname'),\n        center: this.getAttribute('wlpresetcenter'),\n        width: this.getAttribute('wlpresetwidth')\n      };\n    }\n\n    // start app\n    startApp(appId, options, shadow);\n  }\n\n}\n\n// Define the new element\ncustomElements.define('dwv-simple', DwvComponent);\n"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__440__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","_paths","Scroll","ZoomAndPan","WindowLevel","Draw","Reset","ToggleOrientation","Fullscreen","Tags","getToolButton","toolName","appGui","xmlns","path","document","createElementNS","setAttributeNS","svg","appendChild","button","createElement","id","getToolId","title","addEventListener","onDisplayReset","toggleOrientation","toggleFullScreen","openTagsModal","onChangeTool","getSelect","option","createTextNode","select","onChangePreset","_orientation","WeakMap","_lgDivHeight","_app","_tools","_uid","_rootDoc","Gui","app","tools","uid","rootDoc","_classCallCheck","_classPrivateFieldInitSpec","_classPrivateFieldSet","toolbar","_classPrivateFieldGet","getElementById","getToolbarDivId","i","length","progress","max","percent","remove","toLowerCase","name","flag","toolId","disabled","enableTool","classList","add","activateTool","setWindowLevelPreset","setSelectedPreset","activateTools","setTool","setToolFeatures","shapeName","resetDisplay","presetsId","selectedIndex","config","divId","getLayerGroupDivId","orientation","setDataViewConfigs","dataIds","getDataIds","render","_this","lgDivId","lgElement","fullscreenElement","exitFullscreen","style","height","fsDivId","getDwvDivId","requestFullscreen","then","modalDiv","className","display","event","target","modalContentDiv","modalTitle","modalScrollDiv","instanceNumbers","metaData","getMetaData","instanceElement","instanceNumberValue","map","Number","sort","a","b","instanceNumber","slider","type","min","sliderLabel","sliderLine","metaTab","arrayToHtmlTable","getMetaArray","replaceChildren","metaTable","presets","domPresets","hasChildNodes","removeChild","firstChild","label","index","options","arr","row","cell","table","insertRow","item0","keys","j","th","createTHead","k","hcell","charAt","toUpperCase","slice","meta","reducer","tagData","isDicomMeta","getDicomTagReducer","accumulator","currentValue","push","reduce","prefix","tag","getTagFromKey","getNameFromDictionary","getKey","element","vr","sqItems","res","concat","toString","_dropboxDivId","_dropboxClassName","_borderClassName","_hoverClassName","_defaultHandleDragEvent","_onBoxDragOver","_onBoxDragLeave","_onDrop","_onInputFile","DropboxLoader","stopPropagation","preventDefault","box","indexOf","replace","loadFiles","dataTransfer","files","showDropbox","show","layerDiv","innerHTML","p","input","onchange","multiple","htmlFor","link","setAttribute","removeEventListener","startApp","appOptions","dataViewConfigs","rootDocument","dwvApp","App","init","guiTools","wlIndex","splice","dwvAppGui","enableTools","nLoadItem","nReceivedLoadError","nReceivedLoadAbort","isFirstRender","abortOnCrtlX","ctrlKey","keyCode","console","log","abortLoad","window","showProgressBar","Math","ceil","loaded","total","setProgress","selectedTool","canScroll","canWindowLevel","wlpreset","viewController","getActiveLayerGroup","getActiveViewLayer","getViewController","hasExtraPreset","wl","center","width","addWindowLevelPresets","updatePresets","getWindowLevelPresetsNames","error","message","alert","warn","dropBoxLoader","defaultOnKeydown","onResize","uri","loadFromUri","urls","loadURLs","DwvComponent","_HTMLElement","_callSuper","_inherits","appId","container","layerGroup","dropBox","hasAttribute","getAttribute","dwvLink","href","para","getDwvVersion","legend","shadow","attachShadow","mode","split","item","trim","_wrapNativeSuper","HTMLElement","customElements"],"sourceRoot":""}